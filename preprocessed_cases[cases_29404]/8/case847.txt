this case requires us to decide whether the doctrine applies to an interlocutory jurisdictional decision of the puerto rico appellate courts.while this case was under advisement,the supreme court unanimously decided exxon mobil saudi basic industries,d,which substantially altered our understanding of the doctrine.we must now apply that altered understanding for the first time.
the present case is not itself complex.appellant federación de maestros de puerto rico federación is the target of an unfair labor practices grievance before appellee junta de relaciones del trabajo de puerto rico,the puerto rico labor relations board board.the board denied the federación motion to dismiss the grievance on the ground of federal labor law preemption.the federación appealed that denial on an interlocutory basis to the puerto rico court of appeals and then to the puerto rico supreme court.after losing the preemption argument in the puerto rico courts,the federación filed an action for declaratory and injunctive relief against the board in the united states district court for the district of puerto rico.the district court concluded that it lacked jurisdiction over the federación claim because resolving that claim would require the court to review the decision of the puerto rico courts that the board had jurisdiction over the labor dispute,in contravention of the doctrine.consequently,the district court dismissed the complaint.we affirm,and explain how exxon mobil affects some of our prior cases.
the relevant facts and procedural history are undisputed.in,the federación puertorriqueña de trabajadores,a labor union,filed an unfair labor practices charge before the board against the appellant federación de maestros de puerto rico in,the board issued a grievance administrative complaint against the federación.the federación then moved to dismiss the grievance on the grounds that the national labor relations board nlrb had exclusive jurisdiction over the dispute it contended that puerto rico labor law was preempted by the national labor relations act,because the federación activities affected interstate commerce 
in early,an administrative judge issued an interlocutory report concluding that puerto rico labor law was preempted by federal law,and that the board therefore lacked jurisdiction.however,the board rejected the interlocutory report and denied the federación motion to dismiss.
after unsuccessfully requesting that the board reconsider its decision,the federación filed an interlocutory appeal to the puerto rico supreme court.that court referred the appeal to the puerto rico court of appeals.in,the court of appeals,in a lengthy opinion and resolution,concluded that the federación activities did not affect interstate commerce,affirmed the board jurisdictional decision,and remanded for further proceedings.
the federación moved for reconsideration,which was denied after some delay.it then petitioned the puerto rico supreme court for a writ of certiorari,which,too,was denied.the federación twice requested reconsideration of the denial of certiorari,and both requests were denied.
in november,the board issued a resolution ordering the continuation of the proceedings.in these proceedings,the federación continued to argue that the board lacked jurisdiction.
in march,the federación filed a complaint against the board in federal district court,requesting declaratory relief and an injunction ordering the board to terminate its proceedings for lack of jurisdiction.the board moved to dismiss the federal complaint under.b on the basis that the district court lacked subject matter jurisdiction to review a decision of the puerto rico court of appeals.the district court granted the motion,and the federación timely appealed.
where no evidentiary hearing has been held,we review de novo the district court dismissal for lack of subject matter jurisdiction.wang bd.of registration in,cir.w e construe the complaint liberally and treat all facts as true,according the plaintiff the benefit of all reasonable inferences.murphy united states,cir.
under the doctrine,federal district courts lack jurisdiction over federal complaints that essentially invite federal courts of first instance to review and reverse unfavorable judgments.exxon mobil.at court of appeals feldman,d rooker fid.trust.at first glance,this case appears to present a relatively straightforward issue.the puerto rico court of appeals held that the board has jurisdiction over the underlying labor dispute,and the puerto rico supreme court declined to disturb that judgment.the federación federal complaint,however,asks the court to declare that the board did not have jurisdiction over the labor dispute.thus,the federación complaint asked the district court to review and reverse an unfavorable judgment,exxon mobil.at.
however,the federación argues that the puerto rico court decision was interlocutory,and that therefore does not apply.this argument draws some support from certain of our mobil precedents.in order to understand this argument,and why we now ultimately reject it,we must first describe the roots of the doctrine,the somewhat uncertain path that our jurisprudence has taken,and finally the clarification provided by exxon mobil 
rooker and feldman 
the jurisdictional statute providing for supreme court review of state court judgments states that f inal judgments or decrees rendered by the highest court of a state in which a decision could be had,may be reviewed by the supreme court by writ of certiorari when certain federal questions are presented.see also id.same for puerto rico supreme court rooker held that congress,by the terms of that statute,granted the united states supreme court,and only the united states supreme court,jurisdiction over appeals from state courts 
if the constitutional questions stated in the federal complaint actually arose in the state case,it was the province and duty of the state courts to decide them and their decision,whether right or wrong,was an exercise of jurisdiction under the legislation of congress,no court of the united states other than this court could entertain a proceeding to reverse or modify the judgment for errors of that character.to do so would be an exercise of appellate jurisdiction.the jurisdiction possessed by the district courts is strictly original.
at.internal citation omitted.in other words,rooker is based on a negative inference because congress only provided for review of state court judgments by the supreme court,congress therefore intended to preclude lower federal courts from exercising such review.feldman repeated this reasoning a united states district court has no authority to review final judgments of a state court in judicial proceedings.review of such judgments may be had only in this court.at.
b.our mobil cases 
relevance of availability of supreme court review 
the close nexus between the doctrine and supreme court review prompts an obvious question what if the supreme court could not have reviewed the particular state court decision at issue our mobil cases suggested that would not apply in this context.see cruz melecio,cir stating,in dictum,that denying jurisdiction based on a state court judgment that is not eligible for review by the united states supreme court simply would not follow from the jurisdictional statute that invigorated the doctrine in the first place hill town of conway,cir because is keyed to,it therefore requires a judgment reviewable by the supreme court.under this logic,the scope of would be limited to state court judgments susceptible to supreme court particular,final judgments,not interlocutory orders.see providing for review of f inal judgments or decrees rendered by highest state courts,same for puerto rico supreme court.arguably,then,under cruz and hill,would not apply to interlocutory orders.that is the argument that the federación makes here.
relevance of preclusive effect under state law 
our mobil case law also recognized,albeit not uniformly,an alternative conception of final judgment.the law of claim and issue preclusion also known as res judicata and collateral estoppel provides a notion of final judgment that is related to,but distinct from,finality for purposes of supreme court review we have suggested,in some of our cases,that o nly a state court adjudication that itself has preclusive effect can bring the doctrine into play.cruz,at see also,cir applies to state or territorial court judgments to which the federal courts would accord preclusive effect,and the federal courts can ascribe no greater preclusive force to a state court judgment than would the courts of that state.quoting cruz,at internal citation omitted gracia,cir same,cert.denied,d 
yet we have also stated,in apparent contradiction to the above cases,that does not require a decision to have state law preclusive effect.see,cir.is broader and blunter than res judicata,and does not impose res judicata technical requirements,s o,despite the disapproval of scholars,federal courts regularly use to rebuff collateral attacks on prior state court judgments without purporting to apply the technical preclusion rules of res judicata,cert.denied,d mandel town of orleans,cir applies whether or not the federal and state causes of action are technically the same for purposes of claim preclusion,or whether all of the familiar conditions for issue preclusion are met.citation omitted sheehan marr,cir noting that res judicata and are separate doctrines,although they have a close affinity to one another,and quoting charchenko city of stillwater,cir,for the proposition that is broader than claim and issue preclusion because it does not depend on a final judgment on the merits.
exxon mobil 
these tests of state court judgment finality in our application of the doctrine have now been superseded by the explanation of that doctrine in exxon mobil.we briefly summarize that case for context.
saudi basic industries corporation sued exxon mobil in delaware state court for a declaratory judgment that it did not owe exxon mobil any money from a contractual agreement exxon mobil counterclaimed for the money.meanwhile,exxon mobil filed a declaratory judgment action in federal court as an insurance policy in case it lost the state court lawsuit.the state case went to judgment first,and the jury found for exxon mobil,awarding it a large verdict on its counterclaim.saudi basic appealed the judgment to the delaware supreme court.see.at.
meanwhile,the federal action proceeded.exxon mobil claims in federal court were essentially identical to its defenses and counterclaims in state court.on an interlocutory appeal related to foreign sovereign immunity,the third circuit sua sponte concluded that exxon mobil claims were identical to claims actually litigated in state court,and ordered the claim dismissed pursuant to the doctrine.see id.at.
the supreme court unanimously reversed,holding 
the doctrine is confined to cases of the kind from which the doctrine acquired its name cases brought by losers complaining of injuries caused by judgments rendered before the district court proceedings commenced and inviting district court review and rejection of those judgments.does not otherwise override or supplant preclusion doctrine or augment the circumscribed doctrines that allow federal courts to stay or dismiss proceedings in deference to actions.
id.at.the court specifically limited the doctrine to cases in the procedural posture of rooker and feldman themselves 
rooker and feldman exhibit the limited circumstances in which this court appellate jurisdiction over judgments,precludes a united states district court from exercising jurisdiction in an action it would otherwise be empowered to adjudicate under a congressional grant of authority.in both cases,the losing party in state court filed suit in federal court after the state proceedings ended,complaining of an injury caused by the judgment and seeking review and rejection of that judgment.plaintiffs in both cases,alleging jurisdiction,called upon the district court to overturn an injurious judgment.because,as long interpreted,vests authority to review a state court judgment solely in this court,the district courts in rooker and feldman lacked jurisdiction.
id.at citations omitted.
in short,the doctrine now applies only in the limited circumstances where the losing party in state court filed suit in federal court after the state proceedings ended,complaining of an injury caused by the judgment and seeking review and rejection of that judgment.id.the doctrine does not otherwise override or supplant preclusion doctrine or augment the circumscribed doctrines that allow federal courts to stay or dismiss proceedings in deference to actions.id.at.
exxon mobil tells us when a state court judgment is sufficiently final for operation of the doctrine when the state proceedings have ended.at.if federal litigation is initiated before state proceedings have ended,if the federal plaintiff expects to lose in state court and hopes to win in federal litigation is parallel,and the doctrine does not deprive the court of jurisdiction.see id.at.on the other hand,if federal litigation is initiated after state proceedings have ended,and the plaintiff implicitly or explicitly seek s review and rejection of the state judgment,id.at,then a federal suit seeking an opposite result is an impermissible attempt to appeal the state judgment to the lower federal courts,and,under,the federal courts lack jurisdiction.
as noted above,our prior tests of finality involved appealability under state law preclusive effect.under exxon mobil,the doctrine applies when the losing party in state court files suit in federal court after the state proceedings ended.we now explore what it means for state proceedings to have ended,and explain how this test differs from the tests we had set forth before exxon mobil.
generally speaking,state proceedings will have ended in three situations.two are obvious the third perhaps is not.
first,when the highest state court in which review is available has affirmed the judgment below and nothing is left to be resolved,then without a doubt the state proceedings have ended.in this situation,the state court judgment would constitute a f inal judgment or decree rendered by the highest court of a state in which a decision could be had under,it would carry preclusive effect in virtually every state,relevant would qualify under exxon mobil ended test.
second,if the state action has reached a point where neither party seeks further action,then the state proceedings have also ended.for example,if a lower state court issues a judgment and the losing party allows the time for appeal to expire,then the state proceedings have ended.in this situation,the judgment would carry preclusive effect in virtually every state.it would usually not,however,be an appealable f inal judgment or decree rendered by the highest court of a state in which a decision could be had under.this is what qualifies under exxon mobil ended test 
third,if the state court proceedings have finally resolved all the federal questions in the litigation,but state law or purely factual questions whether great or small remain to be litigated,then the state proceedings have ended within the meaning of on the federal questions at issue.we infer this meaning from a footnote in exxon mobil that provides an example of a federal suit that would be subject to even though the state court litigation was still ongoing.
the example is a hypothetical propounded in asarco kadish,d.according to the exxon mobil court,the hypothetical would fit within the reach of the reformulated doctrine,even though the litigation had not completely ended,because the state proceedings had ended as to all federal questions.exxon mobil.at.
in asarco,the plaintiffs sought state court declaratory and injunctive relief against an arizona mineral leasing statute on the grounds of,inter alia,federal preemption.see at.the trial court upheld the statute,but the arizona supreme court reversed,and remanded the case to the trial court with instructions to enter summary judgment for plaintiffs,to enter a judgment declaring the state law invalid,and to consider what further relief,if any,might be appropriate.id.the defendants petitioned for certiorari,which the united states supreme court granted.id.at.
the plaintiffs,with the united states as amicus,contended that the court lacked jurisdiction over the appeal.they raised two distinct jurisdictional arguments that the state court judgment was not a final judgment under because matters of relief remained to be litigated,and that the case was nonjusticiable because,although the plaintiffs had standing to file the suit under state law,they did not have standing under article iii.see id.at.
the supreme court rejected both arguments.it held that jurisdiction was available under the doctrine of cox broadcasting cohn,d and that,even though the plaintiffs would not have been able to file the suit in federal court initially,the defendants nevertheless had standing to bring the appeal.see asarco,at.
the court also rejected the united states suggestion that the defendants had to seek relief through a federal declaratory judgment action.id.at.the court observed that such an action would require the federal court to readjudicate the very same issues that were determined in the proceedings below,and in essence would be an attempt to obtain direct review of the arizona supreme court decision in the lower federal courts in violation of.id.at.
asarco,to summarize,was a case where state proceedings had not completely ended,but all federal questions had been finally resolved.the asarco court held that the case had reached sufficient finality both to confer jurisdiction under cox broadcasting,and to invoke against any hypothetical federal action concerning the same questions.a footnote in exxon mobil reaffirms that position 
the injury of which the asarco petitioners the losing parties in state court could have complained in the hypothetical federal suit would have been caused by the state court invalidation of their mineral leases,and the relief they would have sought would have been to undo the state court invalidation of the statute.the hypothetical suit in asarco,therefore,shares the characteristics of the suits in rooker and feldman,loser in state court invites federal district court to overturn judgment.
at.thus,exxon mobil explanation of the asarco hypothetical confirms that applies where the state proceeding has ended with respect to the issues that the federal plaintiff seeks to have reviewed in federal court,even if other matters remain to be litigated.
this scenario prompts the question of how the lower federal courts should determine whether a state proceeding,still ongoing in some form,has ended with respect to a particular federal issue.we infer from exxon mobil that the cox broadcasting test of finality should be used for this purpose by the following reasoning.exxon mobil confirms that the asarco state court litigation was sufficiently final,had ended for purposes of the doctrine.see id.and asarco concluded that the state court litigation there was sufficiently final for supreme court review because it satisfied the cox broadcasting test.see at.in short,exxon mobil and asarco,read together,suggest that if state court litigation is sufficiently final for supreme court review,then it is sufficiently final for purposes of the doctrine.
of course,cox broadcasting itself only answers the question of whether jurisdiction is immediately available,whereas our present question is whether state proceedings have ended.and we hasten to repeat that a proceeding may have ended under exxon mobil even when jurisdiction would not have been available however,while appealability under is not necessary to satisfy the exxon mobil ended test,it will almost always be sufficient put another way,if a state court decision is final enough that the supreme court does have jurisdiction over a direct appeal,then it is final enough that a lower federal court does not have jurisdiction over a collateral attack on that decision.therefore,except in unusual circumstances,if jurisdiction would have been available under cox broadcasting,then the state proceedings have sufficiently ended for purposes of exxon mobil of course,the opposite does not follow as stated above,there are many situations where jurisdiction would not be available,and yet state proceedings have ended.but where jurisdiction is because an appeal has progressed to final judgment,or under one of the cox broadcasting,for purposes of the doctrine,state proceedings will ordinarily be deemed to have ended.
exxon mobil means that our prior tests of finality appealability under and preclusive effect are no longer applicable for purposes.simply put,a state proceeding may meet the ended test of exxon mobil even if it fails one or both of those prior tests.consequently,the applicability of the doctrine no longer turns on whether the state court decision was final or preclusive.rather,we examine the posture of the case in the state,whether state proceedings have ended.at the relief sought in the federal court.
this conclusion conflicts,to some extent,with some of our precedents.ordinarily,newly constituted panels in a circuit should consider themselves bound by prior panel decisions.eulitt me.dep t of,cir.however,an exception applies when a preexisting panel opinion is undermined by subsequently announced controlling authority,such as a decision of the supreme court.id.
that is the case here.exxon mobil holds that federal courts lack jurisdiction to review a state court judgment in a federal case initiated after the state proceedings ended.at.while such judgments will often qualify as final judgments under carry state law preclusive effect,neither finality nor state law preclusive effect is necessary under the exxon mobil test.
consequently,we recognize that exxon mobil has effectively abrogated the dictum in cruz stating that denying jurisdiction based on a state court judgment that is not eligible for review by the united states supreme court simply would not follow from the jurisdictional statute that invigorated the doctrine in the first place,at,and the similar statement in hill holding that,because is keyed to,it therefore requires a judgment immediately reviewable by the supreme court,at.under exxon mobil,state proceedings may have ended even though review would not be available.
similarly,we recognize that exxon mobil has effectively abrogated,and cruz to the extent that they state that doctrine only applies to state court judgments with preclusive effect.see,at applies to state or territorial court judgments to which the federal courts would accord preclusive effect,and the federal courts can ascribe no greater preclusive force to a state court judgment than would the courts of that state.quoting cruz,at,at o nly a state court adjudication that itself has preclusive effect can bring the doctrine into play.quoting cruz,at cruz,at only a state court adjudication that itself has preclusive effect can bring the doctrine into play.under exxon mobil,state law preclusive effect is simply not determinative.
we now apply the clarifications provided by exxon mobil to this case.as we understand it,the federación posits that the puerto rico court decision was interlocutory,that does not give the supreme court jurisdiction over interlocutory judgments,and that,therefore,should not apply.under,as clarified by exxon mobil,these arguments are largely irrelevant.
rather,what matters is that the state court proceedings have ended with regard to the sole federal issue,namely,whether the board jurisdiction is preempted by the nlra.that jurisdictional question is separate and independent from the merits of the dispute.it logically should be,and has been,decided in advance of a trial on the merits.moreover,the puerto rico supreme court has declined to disturb the lower court decision,thus exhausting the possibility of further review in the puerto rico court system 
we find that this case falls neatly within one of the situations described in cox broadcasting 
w here the federal issue has been finally decided in the state courts with further proceedings pending in which the party seeking review in the supreme court might prevail on the merits on nonfederal grounds,thus rendering unnecessary review of the federal issue by the supreme court,and where reversal of the state court on the federal issue would be preclusive of any further litigation on the relevant cause of action if a refusal immediately to review the decision might seriously erode federal policy,the court has jurisdiction.
at.see also belknap,hale,d accepting jurisdiction over state court decision that unfair labor practice charge brought in state court was not within jurisdiction of nlrb local constr.laborers union curry,d accepting jurisdiction over state court injunction against labor union picketing issue to be further litigated on the merits was legality of picketing,which was entirely separate from the union federal defense,that nlrb jurisdiction over labor dispute was exclusive mitchell forsyth,d s decisions rejecting a party claim that he is not subject to suit before a particular tribunal are final for purposes of our certiorari jurisdiction under.if an interlocutory state decision on a federal issue would be reviewable by the supreme court under one of the cox broadcasting exceptions,then absent unusual circumstances not present here state court proceedings have ended for purposes of exxon mobil 
with these issues resolved,this case turns out to be as simple as it first appeared.the federación litigated its federal labor law preemption defense before the puerto rico court of appeals.that court found that the federación was not engaged in interstate commerce and that the board jurisdiction was not preempted by federal labor law the puerto rico supreme court did not disturb that judgment.the federación subsequent federal claim seeks a declaration that the board jurisdiction was preempted by federal labor law.that claim could succeed only if the federal court were to hold that the puerto rico decision was incorrect.as in rooker and feldman,here the losing party in state court filed suit in federal court after the state proceedings ended,complaining of an injury caused by the judgment and seeking review and rejection of that judgment,exxon mobil.at.consequently,the district court lacked jurisdiction to review the state court decision,despite the interlocutory nature of the puerto rico courts decisions.the district court properly dismissed the complaint.
the federación puertorriqueña de trabajadores,though a critical participant in the proceedings before the board,is not a party to the federal action and will not be referred to again.consequently,our references to the federación in the remainder of the opinion refer exclusively to appellant,the federación de maestros de puerto rico.
the federación also asserted defenses under puerto rico law,which are not before us.
the act grants the nlrb jurisdiction over charges of unfair labor practices affecting commerce,which means interstate commerce.see.that jurisdiction is exclusive and preempts state labor law.see san diego.trades council garmon,d.therefore,if the federación activities affected interstate commerce,the board lacked jurisdiction over the grievance.
because the district court and the parties frame the dispute in terms of the doctrine,we do not reach the questions of whether alternative doctrines such as abstention under younger harris,d,or refusal to grant declaratory relief under el dia,hernandez colon,cir,would also have justified dismissal.
when rooker was decided,the supreme court jurisdictional statute provided for writ of error as well as certiorari,but was in most relevant respects similar to the present.see act of september,ch,stat.
in this opinion we will sometimes refer to as a shorthand for,collectively,both and.the differences between the two provisions are not relevant to the issues raised in this case.
although the statute itself has changed since rooker was decided,the changes have not been material to the present issue,see supra note,and the negative inference drawn in rooker applies equally today.
the two concepts of finality serve very different purposes.the purpose of the final judgment rule of is to prevent the supreme court from considering a case that has not reached final judgment.it applies vertically within a single case progress up through the appellate hierarchy.by contrast,the purpose of res judicata and its federal statutory codification,is to prevent federal and sister state trial courts from hearing a case that has reached final judgment.it applies horizontally to parallel litigation or collateral,whether a state court judgment is final for purposes of is a question of federal law,gotthilf sills,d per curiam,but whether it is final for purposes of preclusion is a question of state law,roy city of augusta,cir.
the preclusive effect requirement derives not from construction of,but rather from policy considerations.the most commonly stated rationale for a preclusive effect requirement is that it would be odd for to bar an action in federal court when that same action would be allowed in the state court of the rendering state.davis bayless,cir.
a more subtle version of this scenario is where the lower state court does not issue a judgment but merely an interlocutory order,a discovery order determining whether certain documents were privileged,and the parties then voluntarily terminate the litigation.in this case,the state court issue would be neither appealable under nor preclusive under the preclusion law of most states.nevertheless,the state proceedings have ended,and the doctrine precludes either party from later challenging the order in federal court.
cox broadcasting defines four situations in which a judgment will nevertheless be considered final for purposes of there are further entire to occur in the state courts but where for one reason or another the federal issue is conclusive or the outcome of further proceedings preordained.the federal issue,finally decided by the highest court in the state,will survive and require decision regardless of the outcome of future proceedings.the federal claim has been finally decided,with further proceedings on the merits in the state courts to come,but in which later review of the federal issue can not be had,whatever the ultimate outcome of the case.the federal issue has been finally decided in the state courts with further proceedings pending in which the party seeking review here might prevail on the merits on nonfederal grounds,thus rendering unnecessary review of the federal issue by this court,and where reversal of the state court on the federal issue would be preclusive of any further litigation on the relevant cause of action rather than merely controlling the nature and character of,or determining the admissibility of evidence in,the state proceedings still to come and refusal immediately to review the decision might seriously erode federal policy at.
for example,if a lower state court issues a judgment and the losing party allows the time for appeal to expire,then the state proceedings have ended,but jurisdiction would ordinarily not be available.
by contrast,a preclusive state court judgment is not sufficient to trigger the doctrine.in most states,a trial court judgment acquires preclusive effect as soon as it issues.see,hanover ins,bartlett pullen,me silva silva.while the state court judgment is pending on appeal,it carries preclusive effect,but in most cases the state proceedings have not yet ended.
we do not decide how to apply exxon mobil in cases where the state proceedings have,for all practical purposes,ended as to the federal issue,but the cox broadcasting exceptions do not apply.
the federación contends that,despite losing its jurisdictional argument multiple times before both the board and the puerto rico courts,it has not lost its right to request further review of its jurisdictional defense before those very tribunals.since it might yet prevail on this defense,the federación reasons,the puerto rico decision is not,in the language of exxon mobil,the state proceedings have not consider it highly unlikely that the federación could yet persuade the puerto rico courts that they lack jurisdiction.the puerto rico court of appeals concluded that the federación activities neither impact nor substantially impede the flow of commerce between puerto rico