this case concerns a question of north carolina law whether governmental immunity from equitable claims is waived when a county or municipality acts in a proprietary,rather than governmental,capacity.the district court answered that question in the affirmative and denied appellant city of hickory motion to dismiss for lack of subject matter jurisdiction.for the reasons that follow,we affirm 
in january,appellee agi associates,llc,commenced this action against city of hickory and profile aviation center,on claims arising out of an agreement between hickory and profile.jurisdiction was based on diversity of citizenship.hickory and profile agreed that hickory would pay profile for aviation services that profile provided at the hickory regional airport.in addition,the agreement granted profile a leasehold interest in certain parcels of land at the airport and allowed profile to grant security interests in its leasehold interest to obtain financing.the parties agreed that in the event of profile default,hickory had a first right to cure,which would allow hickory to reclaim the leasehold interest free of any security interests.
in june,profile executed and delivered a million promissory note to rbc centura bank,which it secured by granting the bank an interest in the leased premises and assigning rents from tenants at the airport.in april,rbc centura bank assigned its rights,title,and interest in the promissory note to agi.ultimately,profile defaulted on the promissory and in may,filed a petition for reorganization in the bankruptcy court for the western district of north carolina.in february,the bankruptcy court placed hickory in possession of the leased premises.agi claims that pursuant to the agreement between hickory and profile,hickory had to first cure profile financing obligations before taking possession of the leased premises.it also demands from hickory the rental payments from tenants of the airport,which hickory has refused.
agi filed this action against profile and hickory.against profile,it asserted a breach of contract claim,which is not at issue in this appeal.against hickory,it asserted an action for judicial foreclosure,a demand for accounting,disgorgement of rents,and unjust enrichment.hickory promptly moved to dismiss the claims asserted against it for lack of subject matter jurisdiction under.b and failure to state a claim under.b.the district court held that by acting in a proprietary,as opposed to governmental,capacity in operating the airport,hickory waived its governmental immunity and therefore denied the motion to dismiss for lack of subject matter jurisdiction.furthermore,it dismissed agi claims for judicial foreclosure and an accounting as moot,leaving only the disgorgement of rents and unjust enrichment claims intact.hickory now appeals.
questions of subject matter jurisdiction are reviewed de novo.dixon coburg dairy,cir en banc.when a defendant argues that the complaint fails to allege facts establishing subject matter jurisdiction,as hickory does here,the facts alleged in the complaint are taken as true,and the motion must be denied if the complaint alleges sufficient facts to invoke subject matter jurisdiction.kerns united states,cir.the burden of establishing subject matter jurisdiction rests with the plaintiff as the party asserting jurisdiction.adams bain,cir.
under north carolina law,counties and municipalities retain immunity from suit unless they consent to be sued or waive immunity.whitfield gilchrist.this immunity,often referred to as governmental immunity,can be waived by a municipality in three discrete ways by entering into a valid contract by acting in a proprietary capacity and by purchasing liability insurance 
under the contract theory of waiver,when a county or municipality enters into a valid contract,it has implicitly consent ed to be sued for damages on the contract in the event it breaches the contract.smith state,addressing the state immunity from suit see also data cnty.of durham,citing to smith state for the proposition that when a governmental entity such as a county enters into a valid contract,the entity implicitly consents to be sued for damages if there is a breach.to successfully establish waiver under this theory,a plaintiff must show that.a,which sets out the requirements for a county to enter into a valid contract,has been met.data,at.
alternatively,under the proprietary function theory,a county or municipality waives its governmental immunity by acting in a proprietary,as opposed to governmental,capacity.estate of williams ex rel.overton pasquotank cnty.parks and recreation dep.the rationale for this exception is that when a municipality acts beyond the scope of its ordinary governmental functions and engages in services for a profit,it should be treated as a private corporation,including with respect to the liability to which private corporations are subject.id.the final way that a municipality may waive immunity is by purchasing liability insurance,which is not at issue here.data,at.
the crux of the parties disagreement is whether under the proprietary function theory,a municipality waives governmental immunity for equitable claims.hickory,which has conceded that it was acting in a proprietary capacity,claims that when a municipality acts pursuant to a proprietary function,it waives immunity only for tort and contract claims,not for equitable claims such as unjust enrichment and disgorgement of profits.agi,by contrast,posits that governmental immunity is waived for any suit,including equitable claims,in which the underlying cause of action arises from the county or municipality acting in a proprietary capacity.
to resolve this issue,we look to north carolina state law on immunity to supply the rule of decision,as jurisdiction is based on diversity.horace mann ins.star ins,cir.with no controlling precedent from the supreme court of north carolina on this issue,we are confronted with the task of predicting how that court would rule salve regina coll.russell,d rehnquist,dissenting ellis grant thornton llp,cir.in such circumstances,the state intermediate appellate court decisions constitute the next best indicia of what state law is,although such decisions may be disregarded if the federal court is convinced by other persuasive data that the highest court of the state would decide otherwise.liberty mut.ins.triangle,cir quoting charles wright,arthur miller edward cooper,federal practice and procedure ed.
because north carolina precedent suggests that the supreme court of north carolina would rule that immunity from equitable claims may be waived pursuant to the proprietary function theory and the rationale behind the theory,as articulated by both the united states supreme court and the supreme court of north carolina,is consistent with the waiver of immunity for equitable claims,we hold that the district court did not err in its application of north carolina state law.
hickory contends that north carolina law limits waiver of governmental immunity under the proprietary function theory to contract and tort cases only.in so arguing,it relies most heavily on data general,and also whitfield and m series rebuild,llc town of mount pleasant.
we readily conclude that neither whitfield nor m series rebuild is of assistance to hickory.reliance on these cases is misguided because in neither case did the courts analyze the government claim of immunity under the proprietary function theory.rather,the courts finding of immunity hinged entirely at explaining that it was reversing the lower court on the basis that it improperly expanded smith state,which addressed only the contract theory of waiver m series rebuild,llc,at setting forth the requirements of.a and finding that plaintiff had not met those requirements.indeed,neither case even mentioned the parallel proprietary function theory of waiver,much less expressly addressed whether immunity from the equitable claims could be waived under that theory.neither case,therefore,imposes any limitations on whether governmental immunity from equitable claims may properly be waived under the proprietary function theory.
hickory reliance on data general