in late november,the police stopped a ford mustang that had been carjacked petitioner octavio barriga was a passenger in the car.after the car owner told police barriga was not one of his assailants,the people charged barriga in a juvenile wardship proceeding with unlawfully taking or driving a vehicle and resisting a peace officer among other charges,but did not charge him with carjacking.
in,barriga entered into a plea agreement in the juvenile case pursuant to which he admitted the charge of resisting a peace officer and the other charges related to that incident were dismissed.
in late december,the police obtained a warrant to search barriga cell phone,which they had seized from the stolen mustang,and in the execution of that warrant discovered a series of text messages that incriminated barriga in the carjacking.as a result,the people charged barriga with the carjacking in criminal court.barriga moved to dismiss the criminal case pursuant to the bar on multiple prosecutions in penal code section among other grounds,but the trial court denied that motion.
on barriga petition for a writ of prohibition,we conclude the trial court erred in denying his motion to dismiss the criminal case because there was no substantial evidence to support a finding that the people made reasonable efforts or acted with due diligence to discover the text messages on barriga cell phone.absent an evidentiary showing of due diligence by the people,barriga was entitled to protection against a second prosecution arising out of the taking of the mustang.accordingly,we will grant barriga petition.
factual and procedural background 
around on november,stockton police received a report of a carjacking at laughlin park.upon learning the victim,salvador lopez,was being transported to the hospital,a police officer went there to speak with him.lopez reported to the officer that three hispanic males,around or years old,tried to tie him to a pole attacked him when he resisted one using a metal pipe robbed him of four dollars,his cell phone,and his car key and then drove off in his red ford mustang.
around that same day,stockton police officer thomas heslin,who was aware of the reported carjacking,found himself driving behind a red ford mustang.officer heslin checked the license plate number and discovered the registration was expired,so he pulled the car over.there were five individuals in the car,three male and two female.the driver,jorge reynaga,admitted he was on probation.officer heslin had reynaga get out of the mustang and into the back of the patrol car.when the right front passenger,later identified as barriga,started to get out of the mustang,officer heslin told him to get back in the car.barriga refused,so officer heslin placed him in the patrol car with reynaga.subsequently,the third male in the car,alfredo,also disobeyed officer heslin instructions to remain in the mustang,and officer heslin placed him in the patrol car as well.
eventually,other officers arrived to assist officer heslin.at some point,the mustang was identified as lopez.additionally,it was determined that the license plates on the mustang belonged to another vehicle.
under the seat where barriga had been,the police found a bag with grams of methamphetamine.there was also a black samsung cell phone on the floor of the car.officer heslin saw that the wallpaper,background photograph on the cell phone was a picture of barriga and three other males making gang signs with their hands and wearing red clothing.barriga later identified the phone as his.
in a statement to officer heslin,reynaga claimed he did not know the car was stolen.he said he had been over by the park when barriga drove up in the mustang with another male and two females,all of whom were very drunk.he decided to drive them around and had been driving the mustang for only about minutes when the police stopped him.
later,at a field show up at the hospital,lopez identified reynaga and alfredo as two of the perpetrators of the carjacking.lopez was not able to identify barriga as one of the perpetrators,however.in fact,according to the police report,lopez was certain barriga was not involved.
on november,a police officer was dispatched to an address on barbados court on a report of stolen license plates.at that time,the officer determined that the plates stolen from this address were the plates found on the stolen mustang.the officer also determined that barriga lived nearby on the same street.
two days after the incident,on november,the juvenile division of the san joaquin county district attorney office filed a juvenile wardship petition against barriga case,which included five counts pertaining to his conduct on november as follows unlawfully taking or driving lopez mustang receiving stolen property the mustang resisting a peace officer selling or transporting methamphetamine and possessing methamphetamine.each count but the third included a criminal street gang street terrorism enhancement allegation.
barriga was arraigned on the petition on december.on december,he accepted a plea agreement,admitting the allegation of resisting a peace officer and one of the other four unrelated counts in exchange for dismissal of the remaining seven counts of the petition.the dispositional hearing was set for january.
meanwhile,in late december,stockton police detective kenneth krein,who was investigating the carjacking,obtained a warrant to search barriga cell phone,which had been booked into evidence.a search of the phone revealed a number of text messages from november,including the following exchange 
from the phone at bt a beat da hit a pai a n kame up on hiz car.
to the phone at lol fuk your mean.
from the phone at fuk it bt u tryin kik it 
to the phone at rite now.
to the phone at wat about tomorow 
from the phone at if i till got it.
to the phone at orite what kind of car is it.
from the phone at mustang.
to the phone at oh what color.
in light of this new information,on january the san joaquin county district attorney office filed a criminal complaint against barriga under subdivision d of section of the welfare and institutions code charging him with robbery,carjacking,false imprisonment by violence,transporting or selling methamphetamine,and street terrorism.later that month,the people filed an amended complaint dropping the drug charge and the street terrorism charge.all three of the remaining charges included criminal street gang enhancement allegations.
on february,the disposition hearing was finally held in the juvenile case.barriga was committed to the county camp for a year,in addition to days already served.
with the preliminary hearing in the criminal case set for march,barriga filed a motion to dismiss based on breach of contract the plea agreement,double jeopardy,and kellett superior court cal d,a case interpreting the bar on multiple prosecutions in penal code section.the people opposed the motion,arguing that the evidence of barriga involvement in the carjacking and robbery was not revealed until december,when his cell phone was searched.in opposing the motion,the people offered no explanation of why a search warrant for barriga cell phone was not obtained until two weeks after he had entered into a plea agreement in the juvenile case.
at the preliminary hearing,in considering the motion to dismiss,the court judge terrence van oss concluded that the real issue here is whether or not the people are bound by th e plea bargain in the juvenile case.thus,at the end of the hearing the court told the people they needed to go back to the juvenile court and ask to have the plea bargain set aside if they wanted to proceed with the criminal case.the court then denied the motion to dismiss without prejudice on the ground it was the wrong motion.the court held barriga to answer on the robbery and carjacking charges but not on the false imprisonment charge.
on april,the people filed a motion in the juvenile case asking the court to withdraw its approval of the plea agreement because the agreement was premised upon incomplete information.that motion was later denied.while the people motion was pending,however,barriga renewed his motion to