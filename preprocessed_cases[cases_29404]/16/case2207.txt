plaintiffs appellants michigan southern railroad company and michigan southern railroad,appeal from the district court dismissal of their complaint for lack of subject matter jurisdiction,pursuant to rule b of the federal rules of civil procedure.plaintiffs brought suit against the branch joseph counties rail users association,seeking a declaration that a agreement concerning the use and maintenance of certain railroad tracks is effective,as well as for specific performance of its terms.plaintiffs sought relief pursuant to the declaratory judgment act,et,and alleged federal question jurisdiction under and,and of the interstate commerce commission termination act.for the reasons set forth below,we affirm the district court.
background 
the appellants,michigan southern railroad,wabash western railway,an iowa corporation mso,and michigan southern railroad,a delaware corporation msrr,are railroads authorized by federal law to provide common carrier rail service on certain rail lines in michigan and indiana.
on december,the interstate commerce commission now surface transportation board authorized msrr to provide common carrier rail service to a railroad line extending from just east of sturgis,michigan,to coldwater,michigan,a distance of approximately miles hereinafter,the rail line.the rail line was then owned by the branch joseph counties rail users association,a michigan corporation rua.
on june,msrr and rua entered into a written agreement the agreement which provided,inter alia,that msrr would service the rail line for a term of years and months and granted msrr an option to purchase the rail line.
on december,msrr entered into a contract with wabash western railway,now mso,which provided that mso would lease msrr assets and provide rail service on msrr behalf to its lines in michigan and indiana.the contract also granted mso an option to purchase msrr capital stock.
on june,msrr and rua entered into an amended and restated operating agreement the agreement.like the agreement,this agreement included an option to purchase the rail line.it also expanded the operating rights of msrr an additional miles,to include the rail line from coldwater,michigan to quincy,michigan.this agreement contained the following provisions 
section.responsibility 
a the operator msrr shall perform,or cause to be performed,all maintenance of way on the rail facility described in attachment i in accordance with and subject to the laws,rules,regulations,and orders of governmental agencies.the operator shall improve the rail facility to a minimum of a class track,as defined by,within one year from the effective date of this agreement.
c should the operator fail to comply with the provisions of the section,the rua will issue a notice of noncompliance stating the nature of such noncompliance.failure by the operator to cure the noncompliance within thirty days of its receipt of such notice shall be reason for termination of this agreement by the rua.
section of the agreement,entitled execution,provided as follows 
this agreement will become binding on the parties and of full force and effect upon the operator furnishing proof satisfactory to the rua,evidencing that the operator has taken all steps to and has rights from the icc now surface transportation board for the operation of the quincy branch 
msrr never obtained operation rights from the surface transportation board stb for the extension of service to quincy.
on or about january,msrr became a subsidiary of mso,by virtue of mso purchase of all the outstanding capital stock of msrr.on january,msrr wrote a letter to rua,informing it of this fact and giving notice to rua of its intent to exercise the purchase option,as provided for by section of the agreement.
on march,rua notified msrr of its belief that the agreement was in effect and that msrr was in breach of that agreement,inasmuch as msrr had not maintained the tracks in class condition as required by section.rua further informed msrr that it was willing to consider selling the rail line,but wanted some assurance that msrr intended to restore the tracks as agreed.rua again sent letters on april,and april,restating its belief that msrr was in breach of the agreement and requesting compliance.
on may,msrr sent rua a letter disputing that it had breached the agreement,and further demanded that rua honor msrr request to exercise its option to purchase the rail line under the terms of that agreement.
on may,filed this action in federal court seeking a declaratory judgment that the agreement was in effect,and requesting specific performance of its option to purchase the rail line.asserted federal question jurisdiction under and the interstate commerce commission termination act iccta,and on june,amended its complaint,adding indiana northeastern railroad company ine as a party,asserting a claim against it for tortious interference with business,based on the belief that ine had entered into an agreement with rua to operate over the disputed rail line.
although the district court initially granted motion for temporary restraining order barring ine from operating on the rail line,the district court ultimately dismissed the action for lack of subject matter jurisdiction.the court concluded that the declaratory judgment act does not provide an independent basis for federal subject matter jurisdiction,and the provisions of the iccta cited by plaintiffs dealt only with the authority of the surface transportation board to regulate interstate rail service,and did not provide the court with jurisdiction over plaintiffs claims.
ii.standard of review 
this court reviews de novo the district court decision to dismiss complaint for lack of subject matter jurisdiction.see anderson liberty lobby,d musson theatrical,federal express,cir.
lack of subject matter jurisdiction is an affirmative defense that a defendant may assert in a motion to dismiss.b in re delorean motor,cir emphasizing that to survive a motion to dismiss,a complaint must contain either direct or indirect allegations respecting all material elements to sustain a recovery under some viable legal theory.where subject matter jurisdiction is challenged pursuant to b,the plaintiff has the burden of proving jurisdiction in order to survive the motion.see moir greater cleveland reg l transit,cir.specifically,the plaintiff must show that the complaint alleges a claim under federal law,and that the claim is substantial.musson theatrical,at.the plaintiff will survive the motion to dismiss by showing any arguable basis in law for the claims set forth in the complaint.id.
in conducting our review,we construe the complaint in a light most favorable to the plaintiff,accept as true all of plaintiff factual allegations,and determine whether the plaintiff can prove no set of facts supporting the claims that would entitle him to relief.ludwig board of trustees of ferris state,cir.we review for clear error any factual findings the district court made in deciding the motion to dismiss.see gafford general,cir.
iii.analysis 
the sole issue before this court is whether the district court erred in determining that there was no basis for federal subject matter jurisdiction in this case.provides that the the district courts shall have original jurisdiction of all civil actions arising under the constitution,laws,or treaties of the united states.in determining whether an action arises under federal law,we are governed by the complaint rule,which requires that a federal question be presented on the face of the complaint.see caterpillar,williams,d louisville nashville mottley.accordingly,a case arises under federal law,for purposes of,when it is apparent from the face of the plaintiff complaint either that the plaintiff cause of action was created by federal law,mottley,at.or if the plaintiff claim is based on state law,a substantial,disputed question of federal law is a necessary element of the state cause of action.gully first bank.franchise tax bd.construction laborers vacation trust,d o nly those cases in which a complaint establishes either that federal law creates the cause of action or that the plaintiff right to relief necessarily depen