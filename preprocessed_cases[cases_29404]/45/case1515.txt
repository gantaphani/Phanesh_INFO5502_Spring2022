the american federation of state,county and municipal employees,local the union and terry white collectively plaintiffs sued the city of benton the city,arkansas its aldermen doug strancener,phillip montalvo,karla haley,willie floyd,ray freemen,leroy allen,ann hall,robin berry,claudine ramsey and charles cuningham,in their official capacities as members of the city council and its mayor,rick holland collectively defendants,to enjoin the city to continue paying retiree health insurance premiums.the district court granted plaintiffs motion for judgment on the pleadings and,after a bench trial to determine the appropriate remedy,ordered the city to pay health insurance premiums for the specified city employees upon retirement.defendants appeal,and we affirm.
background 
beginning in,the union negotiated collective bargaining agreements cba with the city on behalf of nonuniform benton city employees.the parties entered into the cba at issue in this action on june,and it expired on december.the cba established rates of pay,hours of work,conditions of employment and provided for various types of insurance for employees upon retirement.in relevant part,appendix b to the cba provides that r etirement coverage is paid by the city of benton.appellant app.at.since,the city has paid the premiums on the health insurance for its retired nonuniform employees.
at the recommendation of its personnel committee,the city council passed a resolution on october,altering health insurance coverage for its retired employees.the resolution declared that effective january,the city would continue paying of health insurance premiums for retired employees only for employees having more than years of service,cease paying any portion of health insurance premiums for employees with less than ten years of service,and reduce payments to of the premium for each year of service for all of the remaining employees.on march,the city council again addressed the issue of retiree health insurance.based on its belief that arkansas code required retirees to pay their own premiums,the city council passed a resolution terminating any city payment of retiree health insurance premiums.
two months later,on may,plaintiffs filed an action seeking to enjoin defendants from enforcing the march resolution.before answering,defendants moved to dismiss the complaint on june.plaintiffs moved for judgment on the pleadings on july.on august,the district court granted plaintiffs motion for judgment on the pleadings in part and denied defendants motion to dismiss.the city then filed an answer to plaintiffs complaint on january.
on january,the district court amended its order to certify the case for interlocutory appeal.we considered and denied defendants petition for permission to file an interlocutory appeal on february.on january,the district court held a bench trial to address plaintiffs remedy.after trial,each side moved the court to amend its pleadings to conform to the evidence.plaintiffs sought to include the city council october resolution altering retirement health insurance premium coverage as an additional breach of the cba.defendants opposed that addition and in the alternative moved the court to add the defense of illegality to its answer.on january,the district court granted plaintiffs motion and denied defendants motion.two weeks later,on february,the district court issued an order affirming its prior ruling that the city council october and march resolutions were unconstitutional impairments of the cba.the court nullified the city council resolutions and enjoined defendants from enforcing them against city employees with a vested right to the retiree health insurance premiums.
on appeal,defendants argue that the district court erroneously concluded that the october and march resolutions violated the united states constitution.defendants further argue that the district court abused its discretion by denying their motion to amend the pleadings and that the remedy ordered by the district court was clearly erroneous.we disagree.
ii.discussion 
the district court granted plaintiffs motion for judgment on the pleadings before defendants answered but failed to treat the motion as one for summary judgment.see,turkiye sise ve cam fabrikalari,cir motion for judgment on the pleadings before answer is improper and should be treated as motion for summary judgment.nevertheless,any error in a district court failure to treat a motion for judgment on the pleadings as one for summary judgment is harmless if the nonmoving party had an adequate opportunity to respond to the motion and material facts were neither disputed nor missing from the record.surgical synergies,genesee,cir quoting kerr fed.emergency mgmt.agency,cir.here,the court granted defendants ample opportunity to respond to plaintiffs motion and eventually allowed defendants to file an answer.further,material facts were neither disputed nor missing.by filing a motion to dismiss,defendants averred that all facts in the complaint should be taken as true.moreover,when they answered,defendants admitted all relevant facts save the legitimacy and continued existence of the of law for the court to determine.defendants,therefore,received comparable review and treatment despite the procedural impropriety,and any error by the district court was at most harmless.however,because the district court should have construed plaintiffs filing as a motion for summary judgment,we review the case under the summary judgment standard.
we review de novo the district court grant of summary judgment in favor of plaintiffs.mayer nextel,cir.summary judgment is appropriate when there is no genuine issue as to any material fact and the moving party is entitled to judgment as a matter of law.c.a dispute is genuine if the evidence is such that it could cause a reasonable jury to return a verdict for either party.anderson liberty lobby,d.we view all evidence and inferences in a light most favorable to the nonmoving party.see id.at.the nonmoving party,however,may not rest upon mere denials or allegations in the pleadings but must set forth specific facts sufficient to raise a genuine issue for trial.see celotex catrett,d.
contractual impairment 
the contract clause of the united states constitution provides that no state shall pass any law impairing the obligation of contracts.const.art.i,cl.a test determines whether state action violates the contract clause.first,we ask whether the state law has,in fact,operated as a substantial impairment on contractual relationships.equip.mfrs.inst.janklow,cir.this first prong involves a inquiry whether there is a contractual relationship,whether a change in law impairs that contractual relationship,and whether the impairment is substantial.motors romein,d.if substantial impairment existed,we determine whether the state has a significant and legitimate public purpose behind the regulation.educ.employees credit union mut.guar,cir internal citation omitted.if there is no significant and legitimate public purpose,the state law is unconstitutional under the contract clause.see equip,at.if,however,the state identifies such a public purpose,we lastly consider whether the adjustment of the rights and responsibilities of contracting parties is based upon reasonable conditions and is of a character appropriate to the public purpose justifying the legislation adoption.energy reserves group.power light,d internal quotations and alterations omitted.
the contractual relationship 
the district court found that the cba was a valid agreement between the city and the union.defendants challenge this threshold determination.specifically,they argue that the language of the agreement never required the city to pay retiree health insurance premiums,that the cba health insurance provision was illegal under arkansas law,that the city did not have the authority to enter into a agreement with the union and that the payment of retiree health insurance premiums is a matter of city policy that can not be contracted away.
the plain language of the cba states that r etirement coverage is paid.appellant app.at.defendants maintain that this provision does not obligate t