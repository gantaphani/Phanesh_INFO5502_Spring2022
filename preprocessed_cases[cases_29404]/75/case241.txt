opinion of the court 
this case is one in a long line of disputes between on one side the pennsylvania public utility commission puc and on the other side the national railroad passenger corporation amtrak,in a separate but related dispute the southeastern pennsylvania transportation authority septa,concerning the puc assignment of costs and responsibilities for maintaining and repairing crossings in pennsylvania.the puc appeals from the district court order which denied the motions of the puc and puc commissioner aaron wilson,to dismiss amtrak complaint granted septa motion to enforce the consent decree it previously entered into with the puc in federal court and granted in part and denied in part amtrak motion for preliminary and other injunctive relief and its renewed motion for declaratory judgment and preliminary injunctive relief.septa.puc,d,septa.we will affirm.
facts and procedural background 
the puc is a state commission with a mandate to determine the manner and conditions in or under which railroad crossings shall be maintained,operated,and protected to effectuate the prevention of accidents and the promotion of the safety of the public.ann.b.as part of its duties,the puc has responsibility for allocating the maintenance costs for railroad crossings in pennsylvania among the parties having an interest in the particular crossing.ann.this dispute centers on the puc assignment of the costs for maintenance and repair of the lloyd street bridge,in chester,pa,although the ramifications are wider.
history of litigation between the puc,amtrak,and septa 
both amtrak and septa have been involved in a recurring legal battle with the puc concerning its attempt to assess them a portion of the maintenance costs for railroad crossings.the dispute arises from their differing interpretations of amtrak exemption from state and local taxes and fees contained in the rail passenger service act rpsa,which provides 
l exemption from taxes levied after september.in,a rail carrier subsidiary of amtrak,and any passenger or other customer of amtrak or such subsidiary,are exempt from a tax,fee,head charge,or other charge,imposed or levied by a state,political subdivision,or local taxing authority on amtrak after september.in the case of a tax or fee that amtrak was required to pay as of september,amtrak is not exempt from such tax or fee if it was assessed before april.
the statutory history and legislative purpose behind enactment of the rpsa were discussed in some detail by the supreme court in passenger atchison,topeka santa fe railway,d.in that opinion,the court noted that congress passed the rpsa in as a response to the significant decline in the number of operating rail passenger trains and the tremendous operating losses suffered by those passenger services still in operation.id.at.the rpsa was congress effort to revive the passenger train industry by reorganizing and restructuring the rail passenger system.id.as part of the rpsa,congress created amtrak and provided private railroads the opportunity to transfer their obligations to amtrak,which congress had established for that purpose.id.at.all but five private railroads offering intercity passenger service contracted with amtrak to transfer their obligations.id.at.
we explained in passenger.puc,cir,cert.denied,d amtrak ii,that despite federal subsidies,congress recognized that amtrak suffered losses in its first decade,and its financial situation was bleak.in a report,the department of transportation estimated that state and local taxes would cost amtrak more than million in,sess.the senate appropriations committee noted that i t is generally recognized that state and local taxes on a primarily federal investment are inappropriate,and that such taxation serves to erode the ratios which impact on whether states and localities continue to receive the benefits of amtrak service.id.based on this reasoning,congress deferred for one year amtrak payment of any state or local taxes,stat.
the following year,congress revisited the matter and converted amtrak temporary exemption into a continuing one.amtrak ii,at.a senate committee report concluded that a t a time when local jurisdictions are demanding that nationwide rail passenger service be maintained,it seems reasonable to provide for a user contribution whereby those areas receiving the service in turn contribute to amtrak continued existence through tax relief,sess.the statutory exemption from state and local taxes and fees was codified at,which has since been recodified at l 
based on this statutory exemption,amtrak and septa have repeatedly contested the puc attempts to assess them for maintenance costs for crossings,passenger.puc.amtrak i,aff,amtrak ii,cir,cert.denied,d passenger.puc,wl,amtrak iii passenger.puc,wl,amtrak iv passenger.puc,wl,amtrak v passenger.puc,wl,amtrak vi septa.puc,alloc.denied,septa i septa.puc,alloc.denied,septa ii septa.puc.septa iii septa.puc.septa iv septa.puc,wl,septa v.
two of the opinions listed above have particular relevance for the issues before us.in passenger.puc.amtrak i,amtrak challenged a puc order that assessed against amtrak costs required for the replacement and maintenance of the cassatt avenue bridge,also in chester.the district court granted amtrak motion for summary judgment against the puc,finding that amtrak was exempt from the puc assessments under the rpsa id.at.the district court held that t he extensive federal involvement in amtrak management,finances and operations make it apparent that the legislative exemptions should be liberally construed to effectuate its goals.id.at.in addition,the court reasoned that application of the exemption was necessary to prevent the diversion of federal funds from use for amtrak operations and to guarantee amtrak fiscal integrity.id.at.consequently,the district court enjoined the puc from assessing against amtrak costs regarding the cassatt avenue bridge.id.at.
the puc appealed to this court.in amtrak ii,we affirmed the district court order,holding that amtrak immunity from local taxes or other fees extends to assessments for local improvements of the kind at issue for the cassatt avenue bridge.at.it should be noted that the puc attempt to interest the supreme court in the issue was unsuccessful.see.
thereafter,litigation between the puc and septa pending in federal court was resolved by a consent decree entered into by the two parties on january.see septa.puc,civ,septa app.at.the consent decree,which bars the puc from assessing costs against septa,was based on the outcome and language of related cases.in septa.puc.septa iv,the district court held that septa was exempt from the puc assessment of maintenance costs for four bridge crossings pursuant to the rpsa section,c which confers tax immunity on commuter authorities to the same extent as amtrak.id.at.thereafter,the commonwealth court acknowledged that t he puc and this court have duly recognized the federal preemption of the subject matter of state and local assessment of charges against amtrak for repair or replacement of railroad crossings.consolidated rail.puc.with this background,the puc agreed to the consent decree with septa.
the puc accurately describes the consent decree as requiring it to refrain from assessing costs or responsibilities in future cases involving highway bridges against septa.puc br.at emphasis added.specifically,the consent decree provides that the puc is barred hereafter from assessing or continuing to assess upon septa the cost or responsibility of or for design,construction,reconstruction,inspection,maintenance,removal of snow,ice,debris or graffiti,or repair of any highway bridge septa app.at.moreover,the consent decree states 
unless permitted by subsequent amendment to,or repeal of,l and g,henceforth in all puc crossing proceedings involving septa railroad operations or septa railroad,whether such proceedings are initiated by the puc,septa or by any other party,the puc shall not assign to septa,either on a temporary or on a permanent basis,any assessed cost or responsibility in violation of septa statutory exemption with respect to highway bridges 
septa app.at.the consent decree also provides that the district court shall retain jurisdiction over this action to enforce the provisions of this consent decree,including any claims of septa arising out of the puc failure to comply with septa federal statutory exemption.septa app.at.
lloyd street bridge dispute 
in accordance with its statutory mandate,the puc initiated an investigation of the lloyd street bridge in to determine the condition of the bridge and to assign responsibility for its maintenance.the lloyd street bridge,located in chester,pennsylvania,provides a street crossing over railroad tracks used by amtrak and septa.at a field conference held on july,the puc discovered that no concerned party agreed to accept responsibility for maintaining the structure.amtrak app.at.
a puc administrative law judge alj held an evidentiary hearing and issued a recommended decision on march,assigning costs to parties with an interest in the bridge.the city of chester chester,amtrak,consolidated rail corporation conrail,the pennsylvania department of transportation penndot,and delaware county each filed exceptions to the decision with the puc.on september,the puc entered an order order denying all exceptions and adopting the alj recommended decision.the puc order assigned of the maintenance costs to chester,with the remaining divided between conrail,penndot,and delaware county.the puc did not assess any of the bridge maintenance costs to amtrak or septa,finding that they were exempt from contribution 
chester,conrail,and delaware county appealed from the puc order to the pennsylvania commonwealth court.city of chester.puc,alloc.denied,cert.denied,d.the commonwealth court vacated the puc order,holding that amtrak and septa were not exempt from the assessment of maintenance costs.id.at.accordingly,the court remanded the issue to the puc for a hearing and adjudication to apportion costs for the repair and maintenance of the bridge between the present parties,amtrak,and septa id.at.
after a hearing,the alj issued a second recommended decision on august.the puc subsequently entered an order on september,order,modifying the alj recommended decision and allocating the maintenance costs to chester,amtrak,septa,norfolk southern railway corporation,delaware county,and penndot.the puc order also required amtrak and septa each to cover of the cost of providing watchmen,flagmen,and railroad protection during the maintenance work.
amtrak filed a motion in the district court for the eastern district of pennsylvania before judge newcomer seeking to expand the cassatt avenue bridge injunction,previously issued by judge newcomer in amtrak i,to prohibit assessments against amtrak for all bridge crossings in the puc jurisdiction.see septa,d at.septa filed a motion to intervene in the action.see id.on october,judge newcomer denied both motions,holding that amtrak failed to demonstrate that the puc violated the injunction with respect to the cassatt avenue bridge.see id.at.
amtrak and septa then filed separate actions in the district court for the eastern district of pennsylvania,which were assigned to judge dubois.amtrak sought an injunction prohibiting the puc from assigning it costs for maintenance of the lloyd street bridge septa filed a motion to enforce the consent decree it had entered into with the puc in federal court 
on july,the district court entered an order denying the motions of the puc and commissioner wilson to dismiss amtrak complaint.id.at.the order also granted septa motion to enforce the consent decree,enjoined the puc from assessing costs to septa,and enjoined all parties to the puc proceedings from enforcing or seeking to enforce any judicial or administrative order that would assess costs against septa with respect to the lloyd street bridge.id.
finally,the district court granted in part and denied in part amtrak motion for preliminary and other injunctive relief and its renewed motion for declaratory judgment and preliminary injunctive relief.id.the court preliminarily enjoined the puc from assessing to amtrak costs and responsibilities for the lloyd street bridge and from relitigating in state court the extent of amtrak exemption,as decided by amtrak ii,as to the lloyd street bridge and preliminarily enjoined the parties to the puc proceedings from enforcing or seeking to enforce any judicial or administrative order that would assess costs against amtrak with respect to the lloyd street bridge id.at.
discussion 
as the puc points out,the issue before this court is not whether amtrak and septa are exempt from the puc assessment of costs.rather,the issues on appeal are limited to the puc asserted affirmative defenses and procedural arguments raised before the district court.
jurisdiction 
the district court had jurisdiction over the amtrak action pursuant to the rpsa,l,and.the district court had jurisdiction over the septa action pursuant to its retention of jurisdiction under the consent decree.we have jurisdiction over interlocutory orders granting injunctions pursuant to a.although the two appeals have not been consolidated,we consider them in one opinion because the district court did likewise and the issues and the background are interrelated.
amtrak litigation 
in the amtrak action,the district court preliminarily enjoined the puc from assessing costs against amtrak for the lloyd street bridge and preliminarily enjoined the puc,and all other parties to the puc proceedings,from seeking to enforce any judicial or administrative order against amtrak related to the lloyd street bridge.the puc argues that the district court erred by not granting the puc immunity under the eleventh amendment,not dismissing amtrak complaint against commissioner wilson,not granting the commonwealth court order full faith and credit,and granting relief that fails to meet the requirements of the declaratory judgment act dja.
eleventh amendment immunity 
the district court rejected the puc claim that it was entitled to eleventh amendment immunity.septa,d at.the court reasoned that the puc was collaterally estopped from claiming such immunity or,in the alternative,that the puc commissioners were amenable to suit under the doctrine of ex parte young id.at.the puc argues that the district court erred in applying collateral estoppel to bar it from raising its immunity defense.it also argues that ex parte young is inapplicable to amtrak claims because they ultimately targeted the puc,not its commissioners as individuals.
although our court has applied different standards of review where collateral estoppel is in issue,we will apply plenary review.passenger.puc,cir amtrak viii,cert.denied,d.the elements for collateral estoppel are satisfied when the issue sought to be precluded is the same as that involved in the prior action that issue was actually litigated it was determined by a final and valid judgment and the determination was essential to the prior judgment.id.at citations omitted.
the puc first raised eleventh amendment immunity in amtrak v as a defense to a motion filed by amtrak seeking to enjoin the puc from assessing it the costs of repairing and maintaining bridges.the district court rejected the puc defense,holding that the puc is not an arm or alter ego of the state and therefore is not protected by such immunity.wl,at.the court analyzed the three factors identified in christy.tpk.comm n,cir whether the payment of the judgment would come from the state the status of the agency under state law and the agency degree of autonomy.amtrak v,wl at.although the court found that factors and favor,if only slightly,the puc,the court denied eleventh amendment immunity because factor,the most important factor,weighed heavily against the puc.id.at.
the puc again raised sovereign immunity as a defense in a suit brought by amtrak seeking an injunction against puc proceedings to construct passenger platforms at amtrak stations.amtrak viii,at.the district court found that the puc was collaterally estopped from raising sovereign immunity.in one of the most important decisions for our purposes in this series of cases,we affirmed,holding that the puc was collaterally estopped from raising eleventh amendment immunity in a proceeding against amtrak.id.at.
applying the requirements for collateral estoppel,we held that the issue of eleventh amendment immunity was fully considered and determined in amtrak v,id.at the issue of sovereign immunity was actually litigated in amtrak v,id.at the prior court holding that the puc was not entitled to such immunity was necessary to the outcome of the proceeding,the proceedings involved the same parties,even though the prior proceedings did not name individual commissioners as parties,and no equitable concerns counseled against application of collateral estoppel.id.at.
our holding in amtrak viii directly refutes the arguments the puc raises now.contrary to the puc contention here,we did hold that collateral estoppel may be applied to preclude the puc from asserting the defense of eleventh amendment immunity.although the puc continues to argue before us that the district court denial of sovereign immunity in amtrak v was not essential to the judgment in that case,we expressly concluded in amtrak viii that the district court in amtrak v held that the puc was not entitled to eleventh amendment immunity and this holding was necessary to the outcome of the proceeding its holding on the immunity issue was thus essential to its judgment at.the puc present claim is not distinguishable from that holding.
the puc argues that we erred in our analysis in amtrak viii.however,we are bound by our prior decision.cir.the facts of this case do not alter our analysis.the application of collateral estoppel here is equally appropriate because this case,like amtrak v,involves the assessment of costs against amtrak for the maintenance of railroad crossings.therefore,the district court did not err by holding that the puc is collaterally estopped from claiming eleventh amendment sovereign immunity.
because we hold that the puc is collaterally estopped from claiming sovereign immunity in this dispute,it is unnecessary to reach the puc alternate arguments challenging the district court application of ex parte young.as the puc concedes in its brief,if the commission may not even raise its constitutional right to sovereign immunity,then there is no need for an ex parte young analysis.puc br.at see also wheeling lake erie ry.puc,cir stating that because the court decided that the puc was not immune under the eleventh amendment due to congressional abrogation,the court did not need to reach the issue of whether ex parte young applied.
amtrak complaint against commissioner wilson 
the puc next contends that the district court erred by not dismissing amtrak complaint against commissioner wilson in his individual capacity.the puc argues that commissioner wilson recused himself from participation in the puc proceedings in this case,and therefore his action,or inaction,did not harm amtrak.consequently,the puc argues that amtrak does not have standing to bring a claim against commissioner wilson.our review of standing issues is plenary.communications of,verizon,cir.
the district court rejected the puc argument and held that amtrak has standing to bring a claim against the puc and all of its commissioners.it stated that the puc position is an unnecessarily narrow application of standing doctrine.septa,d at.even applying the stringent test for standing urged by the puc,we agree with the district court that amtrak has standing to sue commissioner wilson.
to meet the constitutional requirements for standing,amtrak must show it suffered an injury in fact,a causal connection between the injury and the conduct complained of,and that it is likely that the injury will be redressed by a favorable decision.communications,at.the puc does not dispute that amtrak satisfied requirements or rather,it argues that there is not a causal connection between commissioner wilson recusal and amtrak injury.
the puc argument misses the point.as amtrak notes in its brief,its suit against wilson and the other commissioners seeks prospective relief against the puc and its members to prevent future attempts to assess highway bridge maintenance responsibility on amtrak in violation of the rspa.in order to have effective relief,and prevent a repetition of the assessments,the court must have the ability to enjoin the puc commissioners individually from assessing costs to amtrak.the puc fails to provide any jurisprudential support for its argument that we should distinguish between those commissioners who participated and those who did not participate in the past actions.see verizon.public service comm of,d allowing verizon to proceed in an ex parte young action against all commissioners in their official capacities despite the fact that two of five commissioners voted in favor of verizon position.such a rule would unnecessarily hamper the courts ability to ensure effective prospective injunctive relief and we reject the restriction.
full faith and credit 
we consider next the puc assertion that the district court erred as a matter of law by failing to give the commonwealth court order dated september,full faith and credit the full faith and credit act requires federal courts to give state judicial proceedings the same full faith and credit as they have by law or usage in the courts of such state from which they are taken.as the supreme court stated in parsons steel,first alabama bank,d,a federal court generally must give deference to a state court judgment,granting the same preclusive effect to a judgment as another court of that state would give.id.at.the puc contends that it is subject to conflicting state and federal orders and can not fulfill its statutory duties because the district court failed to give proper preclusive effect to the commonwealth court order.we exercise plenary review over the district court legal conclusions.shire barr,cir.
we consider first the statutory and judicial background that were before the commonwealth court at the time it entered the order at issue.the rpsa is a federal statute that grants the federal district courts original jurisdiction over civil actions to enforce amtrak exemption and expressly gives those courts the power to grant equitable and declaratory relief congress expanded the scope of amtrak exemption in to cover,inter alia,other charges imposed by a state or local entity.see supra.it is evident that congress was relying on the federal courts to carry out its policy to protect amtrak from state charges that could seriously interfere with amtrak viability.
moreover,the commonwealth court was aware that it was not ruling on a clean slate,as there was ample federal precedent regarding amtrak exemption from similar charges,including a holding by this court that the exemption covers the puc assessment of railroad crossing maintenance costs.see amtrak ii,at w e hold that amtrak immunity from local taxes or other fees in section extends to assessments for local improvements to reconstruct and maintain a bridge crossing over amtrak rails amtrak iii,wl at the commission order imposing costs on amtrak for maintaining the bridge,therefore,violates the exemption statute,title.congress policy decision to exempt amtrak from state and local taxes and fees was confirmed by the federal judgments and orders on this issue which predated the commonwealth court order.
the puc relies on the supreme court decision in parsons steel to support its full faith and credit argument.in that case,parsons steel sued a bank concurrently in state and federal court.at.in the federal action,which was tried first,the district court granted a judgment to the bank.id.the bank then pled in the state action the defenses of res judicata and collateral estoppel based on the federal judgment.id.the state court rejected the bank res judicata defense,and a jury returned a verdict for parsons steel against the bank.id.rather than pursuing an appeal in state court,the bank filed for injunctive relief against parsons steel in federal court based on the prior federal judgment.id.at.the district court held that the state claims should have been raised in the federal action and accordingly that the federal judgment barred the state claims under res judicata.id.at.the district court enjoined parsons steel from further prosecuting the state action.id.the case ultimately reached the supreme court.
the supreme court recognized that the case raised a potential conflict between the act aia and the full faith and credit act.the aia generally prohibits a federal court from enjoining a state judicial proceeding.however,it contains a relitigation exception which allows a federal court to grant an injunction restricting state proceedings where necessary to protect or effectuate its judgments.the court stated that federal courts also must adhere to the full faith and credit act by giving the same preclusive effect to a judgment as another court of that state would give.parsons steel,at.the supreme court avoided any conflict between the two federal statutes by limiting the relitigation exception of the act to those situations in which the state court has not yet ruled on the merits of the res judicata issue.id.at.in parsons steel,the bank raised and the state court rejected the defense of res judicata.consequently,the supreme court remanded so that the federal court could apply the state preclusion law.id.at.
the present case is distinguishable from parsons steel.here,amtrak was not even a party in the commonwealth court proceeding,so there was no state court rejection of amtrak claim of entitlement to the statutory exemption.under pennsylvania law,res judicata only binds the parties that participated in the prior litigation.see greater am.funding tara,a final judgment on the merits by a court of competent jurisdiction will prevent any relitigation of issues that involve the same parties and the same cause of action witkowski welch,cir pennsylvania preclusion law requires that the party against whom preclusion is sought must have been party to the prior adjudication.in the absence of adversarial proceedings in the state court,we have no basis to assume that amtrak arguments for application of the federal statutory tax exemption,as construed by the federal courts,were fully developed and argued.
the puc argues that amtrak chose not to intervene in the state proceeding and must suffer the consequences of that choice.however,as the district court points out,in reference to septa,a party is under no legal duty to appear in state court to preserve a federal judgment in its favor.septa,d at see marks stinson,cir in our discussion of the doctrine,we noted that a is not precluded from relitigating matters decided in a prior action simply because it passed by an opportunity to intervene.citation omitted.it follows that the puc can not use the state court proceedings as a conclusive disposition of amtrak claims when it was not a party to those state proceedings.
unlike parsons steel,where the federal court principal interest was enforcement of its prior final judgment,here congress gave the district courts jurisdiction for the specific purpose of enforcing the statutory exemption.as we noted in instructional systems,computer curriculum,cir,parsons steel did not hold that a state court consideration of an issue precludes a federal court from doing so.therefore,amtrak is not bound by the commonwealth court proceedings and may litigate its claims in federal court.
the puc also attempts to use the doctrine as support for its position.that doctrine bars federal district courts from exercising appellate jurisdiction over state court actions.rooker fidelity trust.the supreme court has held that a united states district court has no authority to review final judgments of a state court in judicial proceedings.review of such judgments may be had only in the supreme court.court of appeals feldman,d.the puc contends that the district court order enjoining assessment of costs to amtrak and the further prosecution of the commonwealth court order was an exercise of appellate review and a reversal of the state court disposition.
the puc argument fails for the same reason that its full faith and credit doctrine claim fails,that amtrak was not a party to the state proceedings.unlike in rooker and feldman,here the party bringing the federal action was not a party to the conflicting state action.a state court order to which it was not a party can not be the basis to deny amtrak its statutory right to a federal forum to consider the validity of the puc order assessing it costs precluded by a federal statute.this court has expressly held that does not bar the district court from hearing the claims of the plaintiffs because they were not parties to any of the state court proceedings on the matter.marks,at see also valenti mitchell,cir t he doctrine has a close affinity to the principles embodied in the legal concepts of claim and issue preclusion that to a prior action are not bound.
the puc argues that although amtrak was not a party to the state judicial proceedings,still applies because amtrak was a party to the puc administrative proceedings.the supreme court has made clear,however,that the doctrine only applies to state judicial proceedings,not administrative or legislative proceedings.see feldman,at.a crucial question in this case,therefore,is whether the proceedings were judicial in nature.verizon,at.the doctrine has no application to judicial review of executive action,including determinations made by a state administrative agency.although puc proceedings may have some of the indicia of court proceedings,the puc is not a court of record and it is therefore not entitled to the application of.
injunctive relief 
in its order granting amtrak relief,the district court conducted a traditional analysis of whether amtrak was entitled to preliminary injunctive relief.although amtrak had sought both an injunction and a declaratory judgment,the district court considered only the former.see septa,d at district court found it must treat amtrak motion for declaratory and injunctive relief as one for preliminary injunctive relief.we will nonetheless consider whether the district court order fails to meet the requirements of relief under the dja as the puc argues.
the district court order preliminarily enjoined the puc from assessing costs against amtrak with respect to the lloyd street bridge and preliminarily enjoined chester,delaware county,norfolk southern,and penndot from seeking to enforce any puc order assessing costs to amtrak with respect to the lloyd street bridge.id.at.the puc argues that because the district court order does not enjoin the commonwealth court,the order is ineffective as it will not bar the commonwealth court from enforcing its current order.
we review a district court grant of relief under the dja for abuse of discretion,giving the dja a liberal interpretation.united states.of envtl,cir citation omitted.courts consider five factors when reviewing a district court exercise of jurisdiction under the dja the existence of a state court proceeding involving the same issues and parties the likelihood that the declaration will resolve the uncertainty of the obligation which gave rise to the controversy the convenience of the parties the public interest in a settlement of the uncertainty of obligation and the availability and relative convenience of other remedies.id.at.
the puc argues that these factors counsel against the district court grant of relief under the dja.because the puc concedes that factor convenience of the parties plays no role in this matter,puc br.at,we consider only the other four factors.
first,the puc argues that the issue of amtrak tax exemption has already been fully litigated in a state court proceeding involving the same issues and parties.as discussed above,that contention is incorrect because amtrak was not a party before the state court.consequently,the resolution of the issue in state court did not involve the same parties as were involved in the federal proceeding.see.of envtl,at t he mere existence of a related state court proceeding does not end the inquiry,rather the question of the adequacy of that state court proceeding remains.
second,the puc argues that the district court order did not resolve any uncertainty since there was already a resolution in the state court.puc br.at.this ignores the earlier