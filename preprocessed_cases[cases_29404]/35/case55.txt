the attorney general of michigan issued a notice of intended action nia to ammex,informing it that its advertising might result in the attorney general filing an enforcement action under the michigan consumer protection act mcpa.in response,ammex sought a declaratory judgment against the attorney general,asserting that the attorney general could not enforce the mcpa against it because federal law preempted the mcpa with respect to ammex,and any enforcement of the mcpa against ammex would abrogate the restrictions placed upon states by the commerce clause.the district court eventually dismissed the action as moot based upon the attorney general withdrawal of the nia.both ammex and the attorney general appeal the district court decision.although the action was not technically mooted by events subsequent to the initiation of the action,we affirm the judgment of the district court because the action was not ripe.
ammex is a michigan corporation that operates a united states customs class bonded warehouse and store in detroit,adjacent to the ambassador bridge to canada.the ammex store is sterile in that customers leaving ammex ambassador bridge store may only depart by roads that lead to canada.in other words,goods sold in the ammex store may only reach the united states after they have first been exported to canada because the ammex store is located beyond the on the united border.at the ambassador bridge store,ammex sells a wide array of merchandise,as well as gasoline and diesel fuel.at one point,ammex advertising claimed that its goods could be purchased with no state tax,no federal tax.ammex sales of gasoline and diesel fuel and its advertising lie at the heart of this action.
since january,ammex has paid,under protest,michigan state sales taxes and motor fuel taxes on its sales of motor fuel.ammex,dep t of treasury,cert.denied,d.ammex filed an action seeking a refund of the state taxes that it paid under protest.id.on september,the michigan court of appeals concluded that ammex was not entitled to a refund and that michigan could levy state taxes on ammex sales of gasoline and diesel fuel.see id.in addition,the united states customs service customs determined in two letter rulings that ammex could not sell gasoline or diesel fuel on a basis.see at.
two months after the ruling,in november,the michigan attorney general issued an nia to ammex,alleging that ammex falsely advertised that its goods could be purchased at the ambassador bridge store free of state and federal taxes.this claim of false advertisement was based on statements that ammex published on its website to the effect that the nature of goods sold at the ammex store resulted in significant savings to ammex customers.the nia pointed out that ammex continued to publish these statements after it had learned from the letter rulings and the michigan court of appeals decision that its sales of gasoline and diesel fuel were subject to both state and federal taxes.further,the nia noted that ammex sold gasoline for prices as high as or higher than its competitors in the detroit area,implying that,contrary to ammex advertising,ammex customers were not reaping any savings on gasoline.through the nia the attorney general provided ammex with the opportunity to cease and desist its allegedly unlawful practices and invited ammex to confer with the attorney general.finally,the nia warned ammex that unless ammex submitted a formal assurance that it would discontinue the allegedly unlawful practice or the attorney general determined that there was no cause for action,the attorney general would be authorized to file a lawsuit under the mcpa,which lawsuit might result in an injunction a fine.
in february of,in response to the nia,ammex filed the declaratory judgment action that is the subject of the present appeal.in its complaint ammex alleged that the attorney general was prevented from enforcing the mcpa because federal law relating to stores preempts the mcpa count i any attempt to enforce the mcpa against ammex would exceed the restrictions placed on the states by the commerce clause with regard to foreign commerce count ii and any mcpa action against ammex based on its internet advertising would be contrary to the restrictions placed on the states by the commerce clause with regard to both foreign and interstate commerce count iii 
meanwhile,ammex was also challenging the letter rulings issued by customs that determined that ammex could not sell gasoline and diesel fuel on a basis.in august of,the court of international trade ruled that the letter rulings were contrary to law and that customs acted unlawfully by denying status to ammex sales of gasoline and diesel fuel based on the reasoning employed in the letter rulings.see ammex,united states,d,cit ammex i.on september,customs authorized ammex to sell gasoline and diesel fuel.ammex,united states,d,cit,aff,ammex ii.customs would later revoke the authorization letter,concluding that gasoline and diesel fuel could not be sold based upon a rationale different from that which supported the earlier letter rulings.id.at,
the present action by ammex against the attorney general continued with the attorney general answering ammex complaint and filing a motion to dismiss.the motion to dismiss alleged that ammex complaint contained a number of jurisdictional defects.the district court eventually denied the attorney general motion to dismiss with regard to counts i,ii,and iii.
at the close of discovery,the attorney general filed with the district court a withdrawal of the nia against ammex.the withdrawal stated that the attorney general would not reinstate the nia,nor issue a new nia with regard to ammex advertising,unless the following changed circumstances occurred 
a final judgment is entered in a tax case for tax periods including,or following,the issuance of the ammex i decision in which it is determined that 
a state sales tax applies in connection with retail sales of items other than motor fuel by ammex or 
b state sales tax state motor fuel taxes apply in connection with retail sales of motor fuel by ammex.
it is conclusively determined,whether by final administrative order including appeal,judicial order including appeal,or by federal legislation or treaty,or in any other conclusive manner,that ammex may not sell motor fuel free of duty,notwithstanding the ammex i decision sic.
at.based on the withdrawal,the attorney general then filed a motion that asserted,inter alia,that the action was moot.a magistrate judge recommended that the court deny the motion to dismiss,but the attorney general did not file objections to the recommendation.
after the magistrate judge issued his recommendation,ammex and the attorney general filed for summary judgment,each addressing counts i,ii,and iii of ammex complaint.at the hearing regarding the motions for summary judgment,the district court raised the mootness issue sua sponte.the district court determined that the attorney general withdrawal of the nia mooted the action,and ordered the case dismissed.both the attorney general and ammex have appealed the district court decision to this court.
ammex complaint established the existence of subject matter jurisdiction.
before we reach the issue of mootness,the attorney general claims that this court does not have subject matter jurisdiction over ammex preemption claim.although the attorney general did not raise this question below,the existence of federal jurisdiction may be questioned at any point in the course of litigation and parties can not waive the requirement of subject matter jurisdiction.riggs island creek coal,cir.contrary to the attorney general position,the district court did have federal subject matter jurisdiction over ammex claims.we review the existence of subject matter jurisdiction de novo.ullmo gilmour,cir.
the supreme court decision in shaw delta air lines,makes clear that a federal court has subject matter jurisdiction when a person seeks to enjoin state officials from enforcing a state regulation against the person on the ground that the regulation violates federal rights.see shaw delta air lines,d see also verizon.pub.serv.comm of,d stating,with respect to an action for declaratory and injunctive relief against a state commission order on preemption grounds,w e have no doubt that federal courts have jurisdiction under to entertain such a suit alltel.pub.serv.comm n,cir here,ammex complaint alleged that federal law preempts the mcpa with respect to foreign trade zones,stores and their business activities,complaint,at.ammex also alleged that the mcpa as applied to ammex advertising violated the commerce clause,at.finally,ammex asked that the attorney general be enjoined from enforcing the mcpa against ammex based on these violations of its federal rights,at.ammex complaint,therefore,properly invokes federal subject matter jurisdiction.
the attorney general asks this court,however,to consider the second circuit opinion in fleet bank,national association burke,cir,in analyzing whether subject matter jurisdiction exists in this case.in fleet bank,the plaintiff,fleet bank,national association fleet,filed a complaint that alleged that the connecticut commissioner of banking the commissioner had adopted an arbitrary,capricious,and erroneous view of connecticut statutes dealing with the imposition of atm surcharges and,alternatively,that the relevant connecticut statutes were preempted by federal law.id.at.on these grounds,fleet sought a declaratory judgment that it could impose the contested surcharge and an injunction to enjoin the commissioner from interfering with the imposition of the surcharges.id.on appeal,the commissioner questioned whether the second circuit had subject matter jurisdiction over the case,arguing that fleet was trying to skirt the complaint rule and invoke federal jurisdiction by anticipating a federal defense through a declaratory judgment action.see id.at.
in concluding that the district court did not have subject matter jurisdiction over the action,the second circuit noted that,unlike the case before it,none of the shaw plaintiffs,or the plaintiffs in the cases upon which shaw relied,raised issues that required the interpretation of state law.id.at.the court found that this distinction mattered,reasoning that the interpretation of state law would implicate complicated abstention doctrines and eleventh amendment concerns,while also risking a major and unwarranted incursion on the authority of state courts to construe state statutes.id.at.consequently,the fleet bank court refused to extend shaw beyond instances where the plaintiff,seeking an injunction on the ground of preemption,does not dispute the meaning and application of state law.id.at.the attorney general asserts that this case falls within the holding of the fleet bank decision.
fleet bank,however,is distinguishable from this case.here ammex did not seek a declaratory judgment that its advertising does not violate the mcpa,nor did it ask the district court to interpret michigan law.rather ammex complaint only asked the court to determine if the mcpa violated its federal rights and,if so,to enjoin the attorney general from enforcing the mcpa against ammex.in short,in ammex federal pleading,it did not dispute the meaning or application of state law.the attorney general,however,urges us to consider what ammex would have pleaded had it waited for the commencement of a state enforcement action.the attorney general contends that it is unimaginable in such circumstances that ammex would have pleaded only a preemption defense.
accepting such an argument would expand fleet bank to such an extent that it would render meaningless the supreme court repeated holdings that federal jurisdiction extends to suits to enjoin state enforcement on federal preemption and comparable grounds.see verizon,at.we have no doubt that federal courts have jurisdiction under to entertain such suit.shaw,at.subject matter jurisdiction exists in those cases despite the fact that if one were to examine closely the nature of the complaint in such a case,the asserted preemption claim would often be remarkably similar to an anticipation of a federal defense through a declaratory action,which generally does not create subject matter jurisdiction under the complaint rule.see public serv.comm wycoff.see also playboy,pub.serv.comm n,cir noting that in shaw the supreme court limited the wycoff rule w ithout explaining exactly why.assuming that fleet bank was correctly decided,we decline to read it so broadly as to preclude subject matter jurisdiction over ammex claims.
ii.the attorney general withdrawal of the nia did not moot ammex claim.
the district court dismissed this action on the ground that it was mooted by the attorney general withdrawal of the nia.while the district court properly dismissed on justiciability grounds,as we explain in part iii,it was not proper for the district court to rely on the mootness doctrine,inasmuch as the attorney general withdrawal did not make it absolutely clear that the allegedly wrongful conduct could not be reasonably expected to recur.we review de novo a district court decision that an action has been mooted.naacp city of parma,cir,cert.denied,d.
under article iii of the constitution,a federal court jurisdiction extends only to actual cases and controversies.a federal court has no power to adjudicate disputes which are moot.mcpherson.high sch.athletic ass n,cir en banc quotation omitted.it is well settled that a defendant voluntary cessation of a challenged practice does not deprive a federal court of its power to determine the legality of the practice.i f it did,the courts would be compelled to leave t he defendant free to return to his old ways.friends of the earth,laidlaw envtl.servs.toc,d alteration in original quoting city of mesquite aladdin castle,d.here the district court concluded that the attorney general withdrawal of the nia mooted ammex declaratory judgment action.a case may be mooted by a defendant voluntary conduct only if subsequent events made it absolutely clear that the allegedly wrongful behavior could not reasonably be expected to recur,friends of the earth,at.quoting united states concentrated phosphate export ass n,d,and interim relief or events have completely and irrevocably eradicated the effects of the alleged violation.county of los angeles davis,d.the heavy burden of demonstrating mootness rests on the party claiming mootness.friends of the earth,at.on the other hand,we have noted that cessation of the allegedly illegal conduct by government officials has been treated with more solicitude by the courts than similar action by private parties.mosley hairston,cir quoting ragsdale turnock,cir.
against this legal backdrop,the district court,principally relying on rison,cir,held that the attorney general withdrawal of the nia was sufficient to moot this action.in,the ninth circuit considered the habeas corpus petition of an excludable cuban alien who,during the pendency of his habeas appeal,had been placed on immigration parole.see id.at.the ninth circuit found that,due to the limited relief courts may grant under the writ of habeas corpus,it was without power to grant relief beyond the freedom from confinement that had already been effected.id.at.this led the court to conclude that the case was mooted.id.the court also concluded that the confinement of the immigrant was not reasonably likely to recur based on the sworn statement of an ins official that a bsent picrin reinvolvement with the criminal justice system,a change in the cuban government enabling him to return to cuba,or the willingness of a third country to accept him,he will be paroled for another year.id.at alteration in original quoting government dismissal motion.thus,having found the voluntary cessation test satisfied,the ninth circuit dismissed the case as moot.
we are reluctant to rely upon here because it is different in some important respects.the instant case is of course not a habeas corpus case,and ammex arguably does not enjoy all of the relief that the court could enter.moreover,the attorney general withdrawal of the nia here is different from the sworn statement in in a significant way.in there was no indication that the ins knew at the time of its statement that any of the changed circumstances were reasonably likely to occur.here,the attorney general withdrawal acknowledges that related litigation is ongoing and might reasonably be expected to lead to the changed circumstances articulated in the withdrawal.see at stating that the attorney general would forbear from issuing similar notices of intended action or filing suit on the basis of the matters raised in the nia under the mcpa until the effect of ammex i ruling on tax matters has been conclusively resolved emphasis supplied.the attorney general withdrawal thus does not make it absolutely clear that the enforcement action is not reasonably likely to recur.consequently,the mootness doctrine,without more,does not provide a sufficient basis for dismissing this case.
iii.ammex claims are not ripe.
although ammex claims were not technically mooted by the attorney general withdrawal of the nia,ammex claims are not ripe.accordingly,we affirm the district court judgment on ripeness grounds.we review issues of justiciablity,such as ripeness,de novo.nra of am.magaw,cir.
the ripeness inquiry arises most clearly when litigants seek to enjoin the enforcement of statutes,regulations,or policies that have not yet been enforced against them.recent holdings of the supreme court make clear the continuing validity in that context of the test for ripeness in the companion cases of abbott laboratories gardner,d and toilet goods gardner,d.see park hospitality ass of the interior,d ohio forestry ass sierra club,d.where,as in this case,the statute at issue has not been enforced against ammex,and indeed where a notice of intent to enforce has been explicitly withdrawn,the ripeness doctrine provides the appropriate analysis for determining whether this case should be heard at this time.
the ripeness doctrine is drawn both from article iii limitations on judicial power and from prudential reasons for refusing to exercise jurisdiction.reno catholic soc,d.the prudential discretion to decline jurisdiction over unripe cases derives from the discretionary nature of injunctive and declaratory remedies.abbott,at.the basic rationale of the ripeness doctrine is 
to prevent the courts,through avoidance of premature adjudication,from entangling themselves in abstract disagreements over administrative policies,and also to protect the agencies from judicial interference until an administrative decision has been formalized and its effects felt in a concrete way by the challenging parties.
abbott,at.see also park hospitality ass n,at.at.in determining whether a challenge is ripe,three considerations must be weighed.the first two deal with the fitness of the issues for judicial determination.one aspect of the judicial fitness of the issues is the extent to which the legal analysis would benefit from having a concrete factual context.the second aspect of the judicial fitness of the issues is the extent to which the enforcement authority legal position is subject to change before enforcement.the third consideration deals with the hardship to the parties of withholding court consideration.see abbott,at.see also ohio forestry ass n,at.together these considerations weigh against ripeness in this case.
judicial fitness the benefit to the court of a concrete factual context.
ammex legal contention is that the mcpa does not apply to its activities because it is preempted by federal statutes and by the negative implications of the commerce clause.analysis of both issues would be significantly benefitted by the concrete context that would be afforded by an enforcement action against a specific action by ammex.
the issue in abbott laboratories was whether a particular regulation requiring the generic name of a drug to accompany the brand name every time on drug labelling was consistent with the federal drug and cosmetic act.at.supporting its conclusion that the challenge was ripe,the court found that the issue was purely legal,and moreover that both sides have approached this case as one purely of congressional intent,and the government made no effort to justify the regulation in factual terms.id.at.in contrast,in the toilet goods companion case,the issue was whether it was statutorily permitted for the food and drug administration to provide by regulation that the fda could have access to manufacturing facilities on pain of suspending certification of the manufacturer.at.although the issue was a purely legal one,the court found that the case was not ripe in part because the validity of the regulation depended not only upon specific legislative intent,but also on an understanding of what types of enforcement problems are encountered by the fda,the need for various sorts of supervision in order to effectuate the goals of the act,and the safeguards devised to protect legitimate trade secrets.id.at.
similarly,in ohio forestry ass n,the supreme court,unanimously reversing this court,held that a challenge to a forest service management plan was not ripe.at.the plan set logging goals,selected the areas suited to timber production,and determined which probable methods of timber harvest were appropriate,but did not itself authorized the cutting of any trees.id.at.with respect to the judicial fitness question of whether the a court legal analysis would benefit from having a concrete factual context,the court stated 
r eview of the sierra club claims regarding logging and clearcutting now would require judicial consideration of the details of an elaborate,technically based plan,which predicts consequences that may affect many different parcels of land in a variety of ways,and which effects themselves may change over time.that review would have to take place without benefit of the focus that a particular logging proposal could provide.thus,for example,the court below in evaluating the sierra club claims had to focus upon whether the plan as a whole was improperly skewed,rather than focus upon whether the decision to allow clearcutting on a particular site was improper,say,because the site was better suited to another use or logging there would cumulatively result in too many trees being cut.
at.see also park hospitality ass n,at.at concluding that judicial resolution of issue at hand should be deferred until court was presented with concrete dispute.
with regard to the need for more factual development,this case is more like toilet goods and ohio forestry ass than like abbott laboratories.the court need for more factual development consideration thus weighs against ripeness in this case.ammex is not challenging a specific rule or finding of the michigan attorney general,but rather the general applicability of a statutory scheme to its conduct.analysis of any preemption or commerce clause issue would benefit from knowledge of just what was forbidden by the mcpa,and what the effects of the state regulation would be on the policies underlying the interstate and foreign commerce clauses and the federal statutes relied upon by ammex.unlike the claims that this court found to be ripe in nra of america magaw,this is not a situation where n o factual development can change what the statute bans and what it protects.at.like the supreme court in toilet goods,w e believe that judicial appraisal of these factors is likely to stand on a much surer footing in the context of a specific application of this statute than could be the case in the framework of the generalized challenge made here.at.
judicial fitness permitting an agency to refine its policies 
the second aspect of the judicial fitness inquiry is perhaps the strongest against ripeness in this case.courts should avoid challenges that do not permit enforcement agencies to refine their policies.in abbott laboratories the case was ripe where the challenge was to a final regulation that the fda was unlikely to change.there was no hint that the regulation was tentative.at.in contrast,although the regulation in toilet goods was technically a final agency action for purposes of the administrative procedure act,the challenge there was not ripe in part because 
t he regulation serves notice only that the commissioner may under certain circumstances order inspection of certain facilities and data,and 