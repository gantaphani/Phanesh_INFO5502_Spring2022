in tapia united states,the supreme court made pellucid that a court may not impose or lengthen a prison sentence to enable an offender to complete a treatment program or otherwise to promote rehabilitation.id.at.nevertheless,a sentencing court commits no error by discussing the opportunities for rehabilitation within prison or the benefits of specific treatment or training programs.id.at.this case requires us,for the first time,to plot the fine line that separates impermissible uses of rehabilitation from permissible uses.concluding that the sentence imposed was free from error in this or any other respect,we affirm.
background 
because this sentencing appeal trails after a guilty plea,we glean the facts from the plea agreement,the colloquy,the unchallenged portions of the presentence investigation report psi report,and the transcript of the disposition hearing.see united states nguyen,cir united states dietz,cir.
our account starts with the events of june.on that date,alberto omar del valle rodr√≠guez commandeered an automobile at gunpoint.police officers subsequently located the stolen car and apprehended the appellant in carolina,puerto rico.
a federal grand jury sitting in the district of puerto rico returned an indictment charging the appellant with taking a motor vehicle by force,violence,and intimidation with the intent to cause death or serious bodily harm count see.after initially maintaining his innocence,the appellant agreed to plead guilty to this count.a magistrate judge recommended acceptance of the changed plea and ordered the preparation of a psi report.
at the disposition hearing,the district court having accepted the guilty plea constructed the appellant guideline sentencing range gsr.to a base offense level of,see ussg a,the court essayed various adjustments,up and down,netting out a total of three additional levels.see id.b d,b,b.these computations,unchallenged on appeal,yielded a total offense level of.the court paired this total offense level with an unchallenged criminal history category of v which resulted from the appellant significant record of prior convictions and the fact that he had committed the carjacking while on probation.
the court proceeded to fix the gsr at to months and sentenced the appellant to an upwardly variant term of immurement months.this timely appeal ensued.
ii.analysis 
the appellant does not gainsay the sentencing court guideline calculations.he does,however,attack what he perceives as the court reliance on his rehabilitative needs and its imposition of an sentence.we address these matters sequentially.
rehabilitation.
we preface our analysis of the appellant first claim of error by noting that he failed to advance this claim below.our review is,therefore,limited to plain error.see united states medina villegas,cir.the plain error standard is familiar.to succeed on plain error review,a defendant must demonstrate that an error occurred which was clear or obvious and which not only affected the defendant substantial rights,but also seriously impaired the fairness,integrity,or public reputation of judicial proceedings.united states duarte,cir.here,however,we discern no error,plain or otherwise.
the appellant argues that the district court erred by using his drug addiction and his related need for rehabilitation as factors warranting an increase in the length of his sentence.the factual support for this argument is at best tenuous the appellant points only to the court allusions at sentencing to his chronic drug addiction and need for supervision.
his argument legal foundation,loosely based on the supreme court decision in tapia,is also shaky.it seeks to exploit a grey area the tapia court did not draw a precise line separating the impermissible use of rehabilitation to increase the length of a sentence from the permissible discussion of rehabilitation programs.see tapia.at.but even though this court has not had occasion to plot that line,a broad consensus has developed among the courts of appeals.while the courts have used a variety of locutions,the dividing line is whether a sentencing court reference to rehabilitative needs was causally related to the length of the sentence or,conversely,was merely one of a mix of sentencing consequences and opportunities.in the absence of a causal relationship,courts have hesitated to find tapia error.see united states lifshitz,cir per curiam finding no tapia error where court mentioned rehabilitation but did not base the length of the defendant sentence on his need for treatment and other primary considerations were present united states repolgle,f d,cir finding no tapia error where,despite mention of rehabilitation,there was no evidence that the court lengthened the sentence based on rehabilitative concerns.where,however,the record indicates that rehabilitative concerns were the driving force behind,or a dominant factor in,the length of a sentence,courts have found tapia error.see,united states garza,cir finding tapia error where rehabilitative needs were the dominant factor for the sentence united states cordery,cir finding tapia error where court imposed a longer term of imprisonment in order to make the defendant eligible for a particular rehabilitation program.
we join this consensus and hold that no tapia error occurs unless rehabilitative concerns are being relied upon either in deciding whether to incarcerate or in deciding the length of the incarcerative sentence to be imposed.thus,the mere mention of rehabilitative needs,without any indication that those needs influenced the length of the sentence imposed,is not tapia error 
measured against this benchmark,the appellant argument shrivels.first,the district court never mentioned rehabilitation second,the record contains no indication that the district court references to the appellant chronic drug addiction either were a proxy for rehabilitative concerns or played any causal role in determining the length of his sentence.there is simply nothing in the sentencing record that,fairly viewed,indicates that the court hinged any part of its sentencing determination on rehabilitative concerns.
we reject the appellant suggestion that the district court articulation of his perceived need for supervision insinuates that his sentence was designed to accommodate rehabilitative treatment.that rank speculation depends on a distorted interpretation of the court language after all,supervision is virtually a term of art in criminal sentencing,ussg a discussing term of supervised release,and the appellant unsavory criminal past graphically illustrates the need for supervision.nothing in what the district court said supports equating supervision with rehabilitation here.
to cinch the matter,the actual basis for the district court sentencing determination is crystal clear.the court made persistent and pointed references to the appellant extensive criminal history,serial probation violations,and elevated risk of recidivism.these factors not drug addiction or rehabilitative concerns plainly appear to have been the driving forces behind,and the dominant factors in,the length of the appellant sentence.there is no hint of tapia error.
upward variance.
the appellant second claim of error implicates the reasonableness of the upward variance.we review this claim for abuse of discretion.see gall united states.the hallmark of this inquiry is reasonableness.see united states clogston,cir.
with respect to sentencing determinations,reasonableness has both a procedural and a substantive dimension.see united states martin,cir.the procedural dimension includes errors such as failing to consider appropriate sentencing factors,predicating a sentence on clearly erroneous facts,or neglecting to explain the rationale for a variant sentence adequately.see id.citing gall,at.the substantive dimension focuses on the duration of the sentence in light of the totality of the circumstances.see id.
the appellant casts his claim of error as procedural,arguing that the considerations on which the district court based its upward variance were already taken into account in fashioning the gsr.relatedly,he argues that the court failed to articulate 