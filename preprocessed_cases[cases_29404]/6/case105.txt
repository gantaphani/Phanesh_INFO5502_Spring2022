this controversy began when r g mortgage corporation obtained a default judgment in the puerto rico court of first instance ordering foreclosure of a mortgage on the principal residence of pedro vergara.in a later federal action brought by r g mortgage and two affiliated companies premier bank of puerto rico and financial corporation,vergara asserted,via a counterclaim,that the three plaintiffs collectively,the companies had violated the federal truth in lending act tila,by failing to provide timely and accurate disclosures anent certain aspects of the mortgage loan.despite the presence of new parties and a new cause of action,the district court determined that the prior foreclosure judgment barred vergara tila claim.this appeal followed because vergara can not surmount the broad sweep of the res judicata doctrine,we affirm.
background 
the companies are related business entities.premier bank is a licensed consumer lender and r g mortgage is a loan servicer that principally handles loans in which premier bank is involved.both firms qualify as creditors for tila purposes.see f.financial is the corporate parent of the other two companies.
on february,vergara and his wife,maria viera clemente viera,borrowed from premier bank.the loan constituted a consumer credit transaction governed by the tila.see id.aa.as security for repayment of the loan,the couple executed a mortgage on their principal residence in favor of premier bank.
for several months,vergara and viera assiduously made the required mortgage payments.in or around august of,however,the payments ceased and the loan quickly went into default.as a result,the loan servicer,r g mortgage,filed a collection and foreclosure action in the puerto rico court of first instance.despite proper notice and service of process,neither vergara nor viera appeared.consequently,on may,the court entered a default judgment against them and authorized foreclosure of the mortgage.this judgment was not appealed and is now final.
approximately five months later,viera filed a voluntary petition in the bankruptcy court seeking protection under chapter.see a.that filing stayed the execution of the foreclosure judgment.see id.a.within a short time,however,viera died and the bankruptcy court dismissed her petition as moot.that action dissolved the stay.in short order,the court of first instance scheduled a judicial sale of the mortgaged premises for september.
on july,vergara wrote a letter accusing r g mortgage of having failed to make accurate material disclosures in the course of the loan transaction.in particular,he asserted that the pertinent documentation misstated the finance charge,annual percentage rate,and total amount financed.claiming that these transgressions gave rise to a right of rescission under the tila,vergara purported to exercise that right and demanded that r g mortgage return any money received as a result of the tainted transaction.
the companies collectively responded by filing suit in the federal district court.their complaint sought a declaration that vergara tila claim was barred by i res judicata ii the statute of limitations iii his failure to tender the balance of the loan proceeds.
a few days before the date of the planned foreclosure sale,vergara filed a voluntary petition in the bankruptcy court seeking protection under chapter.see a.that filing automatically stayed both the district court proceedings and the scheduled foreclosure sale.see id.a.on r g mortgage application,the bankruptcy court lifted the automatic stay to allow the district court action to proceed.its order expressly prohibited any involuntary sale of the residence pendente lite.
with the district court action back on track,vergara answered the complaint and filed a counterclaim against the companies.largely echoing the accusations contained in his earlier letter,vergara ticked off a litany of alleged tila violations.his counterclaim referred to premier bank as the subsidiary assignee of the other two companies and asserted that,on the basis of that relationship,all three companies were responsible for the acts alleged and were liable for the inaccurate disclosures.vergara prayed for rescission of the loan,disgorgement of the fruits of the transaction,statutory damages,and attorneys fees.
after answering the counterclaim,the companies moved for judgment on the pleadings.they contended that,under the doctrine of res judicata,the foreclosure judgment not only barred vergara counterclaim but also warranted the declaratory relief sought in their complaint.vergara retort was that because the two actions lacked perfect identity of causes and parties,the earlier judgment did not preclude the later assertion of tila claims or defenses.the district court rejected vergara position.it ruled that the rudiments of the puerto rico preclusion statute were satisfied and that the foreclosure judgment precluded the assertion of vergara counterclaim.fin,d.this timely appeal ensued.
ii.discussion 
we begin by limning the applicable standard of review.we then proceed to consider the district court res judicata ruling.finally,we address vergara fallback argument that the statutory window for asserting his tila rescission right remains open notwithstanding a valid judgment of foreclosure.
standard of review.
res judicata is an affirmative defense.see.c.the applicability vel non of the res judicata defense presents a question of law engendering de novo review.gracia,cir.
in this case,the district court granted judgment on the pleadings.see.c.rule c allows a party to move for judgment on the pleadings at any time a fter the pleadings are closed but within such time as not to delay the trial.id.because such a motion calls for an assessment of the merits of the case at an embryonic stage,the court must view the facts contained in the pleadings in the light most favorable to the nonmovant and draw all reasonable inferences therefrom to the nonmovant behoof.de castro,cir charles alan wright arthur miller,federal practice and procedure ed.the court may supplement the facts contained in the pleadings by considering documents fairly incorporated therein and facts susceptible to judicial notice.in re colonial mortg.bankers,cir recognizing this principle in the rule b context.there is no resolution of contested facts in connection with a rule c motion a court may enter judgment on the pleadings only if the properly considered facts conclusively establish the movant point,at.
res judicata.
the full faith and credit clause provides that full faith and credit shall be given in each state to the public acts,records,and judicial proceedings of every other state.and the congress may by general laws prescribe the manner in which such acts,records and proceedings shall be proved,and the effect thereof.const.art.iv.a statute enacted by congress to implement this provision states in pertinent part 
the records and judicial proceedings of any court of any state,territory or possession shall have the same full faith and credit in every court within the united states and its territories and possessions as they have by law or usage in the courts of such state,territory or possession from which they are taken.
the plain language of the statute requires a federal court to give a judgment the same preclusive effect that judgment would receive under the law of the state in which it was rendered.see migra warren city sch.dist.bd.of,d.
here,we are called upon to determine the preclusive effect of a judgment entered by the puerto rico court of first instance thus,puerto rico law supplies the rule of decision.see,at.
in puerto rico,the doctrine of res judicata is a creature of the civil code 
in order that the presumption of res adjudicata may be valid in another suit,it is necessary that,between the case decided by the sentence and that in which the same is invoked,there be the most perfect identity between the things,causes,and persons of the litigants,and their capacity as such.
laws ann.tit.although this statute speaks of res adjudicata,it encompasses both the doctrine of res judicata,claim preclusion and the doctrine of collateral estoppel,issue preclusion,albeit with slightly different requirements for each.see munic.of comerio,cir.
we previously have explained that a party asserting a res judicata defense under puerto rico law must establish three elements i the existence of a prior judgment on the merits that is final and unappealable ii a perfect identity of thing or cause between both actions and iii a perfect identity of the parties and the capacities in which they acted.boateng interam,cir.because vergara concedes that the judgment of foreclosure is final and unappealable,we train the lens of our inquiry on the two perfect identity requirements.
perfect identity thing or cause.three considerations must be borne in mind with respect to this requirement.first,the phrase perfect identity can not be taken literally.see id.at.second,the word thing as used in the statute corresponds basically to the object or matter over which the action is exercised.lausell marxuach diaz de y치침ez,offic.trans.two actions share an identity of things if a decision in the second action might function to contradict a right arisen or arising from,or a right affirmed by a prior decision.a p contractors,asociaci칩n can치,offic.trans.third,the word cause as used in the statute refers to factual cause actions share this type of perfect identity when they flow from the same principal ground or origin.lausell marxuach,offic.trans.at.
as this trilogy of considerations illustrates,puerto rico essentially follows a transactional res judicata approach similar to that adhered to in much of the common law system.see boateng,at.consistent with that approach,puerto rico courts have held that res judicata precludes the subsequent litigation of all claims that either were or could have been asserted in a prior action.see,commonwealth sociedad civil agricola e industrial,offic.trans,per curiam mercado riera mercado riera.
in this case,the state and federal actions possess the perfect identity of thing or cause required by the puerto rico statute.the foreclosure suit and vergara counterclaim involve the same object or matter and share a common factual origin both actions arise out of the loan transaction,entail a determination of the validity of that transaction,and call into question the parties rights the loan and the mortgaged premises.it would be impossible for vergara to prevail on his claim that the loan transaction is subject to rescission without flatly contradicting the state court affirmation of r g mortgage right to foreclose on the encumbrance securing that loan.and,finally,because state courts possess concurrent jurisdiction over tila claims,see e,vergara could have asserted his counterclaim in the foreclosure proceeding.that he inexplicably failed to do so is beside the point.see sociedad civil agricola,offic.trans.at.
vergara principal argument to the contrary posits that his rescission claim is of a different genre than the foreclosure claim.this emphasis on the divergence of the theories on which the underlying causes of action are based confuses legal cause with factual cause.as the puerto rico supreme court has explained,cause is the principal ground,the origin of the actions or exceptions raised and decided,and it must not be mistaken for the means of proof nor for the legal grounds of the claims adduced by the parties.lausell marxuach,offic.trans.at citation and internal quotation marks omitted.thus,puerto rico preclusion statute focuses exclusively on factual cause.see,at.it follows inexorably,as night follows day,that a mere difference in the legal theories on which two causes of action are grounded does not destroy the identity of thing or cause that otherwise exists between two suits arising out of a common nucleus of operative fact.see boateng,at.
vergara second argument is more nuanced.he asserts that the puerto rico supreme court standard formulation of the perfect identity of thing or cause requirement only applies in cases in which the claimant in the second action appeared as the claimant in the first action.building on this assertion,he postulates that the requirement should be construed differently in cases,such as this one,in which the claimant was a defendant.in those cases,vergara premise runs,an adverse judgment only precludes the later assertion of claims that were compulsory counterclaims in the earlier action the later assertion of claims that were either permissive counterclaims or unaccrued at the time of the first suit would be unaffected.
there is one more piece to this puzzle to bring his tila rescission claim within the safe harbor of this proposed rule,vergara cites a skein of federal cases holding that,under.a,a lender claim for debt against a borrower is not a compulsory counterclaim in the borrower tila action against the lender.see,maddox.fin,cir valencia anderson.ford,cir,reversed on other grounds,d whigham beneficial fin,cir.because the puerto rican and federal compulsory counterclaim rules are identical,compare laws ann.tit,app.iii,with.a,vergara suggests that his tila counterclaim was permissive in the earlier foreclosure action and,thus,should not be precluded by the judgment in that action.
this construct can not withstand scrutiny.the precedents cited by vergara do little to resolve whether his tila counterclaim was compulsory or permissive the foreclosure suit.at least one of our sister circuits has determined that a lender debt counterclaim is compulsory,not permissive,in a borrower tila action.see plant blazer fin,cir.another circuit has called into question its earlier holding that a debt counterclaim is permissive rather than compulsory in those circumstances.see asset alloc.mgmt.employers ins,cir questioning the correctness of the court earlier holding in valencia.
at any rate,the case law on which vergara relies involves the obverse of the situation presented here instead of dealing with the question of whether a tila counterclaim is compulsory in a debt action,those cases all deal with whether a debt counterclaim is compulsory in a tila action.this distinction is critical because,without exception,the cases proffered by vergara involve interpretations of the federal compulsory counterclaim rule.while the language of the puerto rican compulsory counterclaim rule is virtually identical,vergara has not identified a single case in which a puerto rico court has either spoken to the issue or stated at interpreting the federal rule bear on the analysis of cases involving the puerto rican rule.
in the final analysis,we need not determine whether the puerto rico supreme court would deem vergara tila counterclaim compulsory or permissive the original foreclosure suit.that court,we think,would ask a somewhat different question.it has strongly suggested that an adverse judgment precludes the subsequent assertion of a compulsory counterclaim.see neca mortg.v.a w developers,dictum worldwide food distribs.col칩n berm칰dez,holding that an eviction judgment against a lessee barred the lessee subsequent suit to enforce the option provision of the lease.perhaps more importantly,however,under the transactional approach generally adhered to in puerto rico,a final judgment against the defendant typically precludes not only the later assertion of compulsory counterclaims by that party but also that party later assertion of any other available counterclaim whose successful prosecution in the action would nullify the initial judgment or would impair rights established in the initial action.restatement second of judgments b.
the claim here at claim for runs afoul of this rule.after all,vergara can not successfully prosecute a rescission claim without nullifying r g mortgage right to foreclose the mortgage.thus,even if vergara were correct that the perfect identity of thing or cause requirement is more forgiving in cases in which the claimant in the second action was the defendant in the first matter on which we do not still would conclude that the preclusory perfect identity of thing or cause requirement is satisfied in this instance.
perfect identity parties.the purpose of the perfect identity of parties requirement is to guarantee that the rights and obligations of a particular litigant will not be foreclosed without that litigant knowledge or opportunity to participate.futura dev.centex,cir.in harmony with this purpose,the puerto rico res judicata statute directs that 
t here is identity of persons whenever the litigants of the suit are legal representatives of those who litigated in the preceding suit,or when they are jointly bound with them or by the relations established by the indivisibility of prestations among those having a right to demand them,or the obligation to satisfy the same.
laws ann.tit.this is a privity requirement,and the puerto rico supreme court has taken a pragmatic stand on its construction.puerto rican independence party commonwealth elections comm n,offic.trans.
vergara does not seriously contend that this requirement poses a threat to r g mortgage assertion of the res judicata defense.nor could he r g mortgage was the plaintiff in the action,and vergara concedes that he was properly served as a defendant in that action.thus,the perfect identity of parties requirement is both literally and practically satisfied with respect to r g mortgage.
vergara suggests that the result is altogether different with regard to premier bank and financial.this is so,his premise runs,because those two organizations are juridical persons separate and distinct from r g persons who did not participate in the foreclosure action.while the facts on which vergara premise rests are correct,the conclusion that he seeks to have us draw is not.
the mere fact that premier bank and financial are separate corporations who were absent in the foreclosure proceeding does not render them ineligible for the protection of the preclusion statute.after all,the puerto rico supreme court has held that the joinder of additional defendants in the suit,without more,does not destroy the perfect identity of parties that is needed for preclusion.see id.the instant case is a paradigmatic example of why that is so vergara has alleged in his counterclaim that premier bank and financial are derivatively responsible for the acts of r g mortgage which the counterclaim describes as their subsidiary assignee.
the case law requires us to consider this question pragmatically.see id.this means,of course,that we can not elevate form over substance.given that mandate,we do not see how premier bank and financial can be tied so closely to r g mortgage actions for purposes of the counterclaim and yet,at the same time,be considered distinct from r g mortgage for purposes of the res judicata analysis.vergara simply can not have it both ways either the companies are in privity with one another for both liability and res judicata purposes,or they are not in privity for either purpose.united states tierney,cir having one cake and eating it,too,is not in fashion in this circuit.
in a weak attempt to blunt the force of this reasoning,vergara invites us to fashion a general rule that mortgage servicers such as r g mortgage are not in privity with mortgagees such as premier bank for res judicata purposes.in an endeavor to make this invitation attractive,vergara cites a federal statute,the real estate settlement procedure act respa,which defines a mortgage servicer,somewhat circularly,as the person responsible for servicing the loan.i.respa further defines servicing as receiving any scheduled periodic payments from a borrower pursuant to the terms of any loan and making the payments of principal and interest and such other payments with respect to the amounts received from the borrower as may be required pursuant to the terms of the loan.id.i.vergara hypothesizes that because a mortgage servicer merely acts as a conduit for payment between the mortgagee and the mortgagor,the servicer ordinarily is not in privity with the mortgagee.
vergara has it backwards.typically,a mortgage servicer acts as the agent of the mortgagee to effect collection of payments on the mortgage loan.thus,it will be a rare case in which those two parties are not perfectly identical with respect to successive suits arising out of a single mortgage transaction.our prior cases establish the general rule that where one party acts for or stands in the place of another in relation to a particular subject matter,those parties are in privity for purposes of the puerto rico preclusion statute.see,in re colonial mortg.bankers,at holding that a successor corporation was in privity with its predecessor futura,at holding that perfect identify existed between a parent corporation,on one hand,and its subsidiary and agents,on the other hand republic sec.aqueduct sewer,cir holding that the assignee of a contract was precluded from litigating a claim that had been asserted by the assignor in a prior action fiumara fireman fund ins,cir concluding under new hampshire res judicata law that arson investigators were in privity with the insurance companies for which,as agents,they had acted.
in this instance,there is no dispute that r g mortgage acted on behalf of premier bank and,indirectly,on behalf of financial in servicing the mortgage in question and in commencing the foreclosure action.consequently,premier bank and financial are in privity with r g mortgage for res judicata purposes with respect to the instant action.clearly then,premier bank and financial have a sufficient identify of interest with r g mortgage to satisfy the requirement imposed by puerto rico law.
we summarize succinctly.the requirements of res judicata are satisfied in this case because the judgment against vergara is final and unappealable the state and federal actions arise out of a common nucleus of operative fact and pertain to a common subject matter vergara can not successfully prosecute his rescission claim without contradicting the state court affirmation of r g mortgage right to foreclose the mortgage and the parties in the federal action are,for all practical purposes,identical to the parties in the state action.therefore,the prior judgment precludes vergara from asserting his present rescission claim against the companies.
c.the tila expiration provision.
at oral argument,vergara pointed out that the tila,in terms,permits a debtor claiming that the lender omitted certain material disclosures to assert a right of rescission up to three years after the date of consummation of the transaction or until the sale of the property,whichever occurs first.f see beach ocwen fed.bank,d.seeking refuge in this provision,vergara asseverates that even if his tila counterclaim otherwise would be barred under puerto rico res judicata law,the window for asserting his tila rescission right remains open because neither terminating expiration of the period or the sale of the occurred.as we explain below,this argument sails wide of the mark.
although the statutory language admits of no explicit exception,at least one other court of appeals has concluded that events other than the expiration of the period or the sale of the encumbered property can cut off the debtor right of rescission.see albano norwest fin.haw,cir obtaining a default judgment of foreclosure extinguishes the debtor right of rescission hefferman bitton,cir entering into a contract to sell the encumbered property terminates the debtor right of rescission.we agree with the ninth circuit that the tila statute merely sets out the right maximum life span and does not affect procedural or substantive requirements that might end its existence even earlier.albano,at.we hold,therefore,that ordinary preclusion principles continue to operate in the tila milieu and that those principles may hasten the demise of a debtor right of rescission.
this is a result driven not only by precedent but also by common sense.fairly read,the tila contains no hint of a legislative intent to preempt normally applicable preclusion rules or otherwise to undercut congress general directive that federal courts should afford judgments the same preclusive effect that they would receive in the courts of the rendering state.see.we already have determined that,as a matter of puerto rico law,the earlier foreclosure judgment precluded vergara later assertion of a tila claim.see supra part ii b.accordingly,the entry of this preclusiv